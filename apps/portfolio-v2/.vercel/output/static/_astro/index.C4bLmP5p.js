function Dr(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}function zr(h){if(h.__esModule)return h;var e=h.default;if(typeof e=="function"){var g=function w(){return this instanceof w?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};g.prototype=e.prototype}else g={};return Object.defineProperty(g,"__esModule",{value:!0}),Object.keys(h).forEach(function(w){var a=Object.getOwnPropertyDescriptor(h,w);Object.defineProperty(g,w,a.get?a:{enumerable:!0,get:function(){return h[w]}})}),g}const Gr={},Ur=Object.freeze(Object.defineProperty({__proto__:null,default:Gr},Symbol.toStringTag,{value:"Module"})),D=zr(Ur);var Y,We;function z(){if(We)return Y;We=1;const h=function(b){return typeof b<"u"&&b!==null};return Y={defined:h,object:function(b){return typeof b=="object"},plainObject:function(b){return Object.prototype.toString.call(b)==="[object Object]"},fn:function(b){return typeof b=="function"},bool:function(b){return typeof b=="boolean"},buffer:function(b){return b instanceof Buffer},typedArray:function(b){if(h(b))switch(b.constructor){case Uint8Array:case Uint8ClampedArray:case Int8Array:case Uint16Array:case Int16Array:case Uint32Array:case Int32Array:case Float32Array:case Float64Array:return!0}return!1},arrayBuffer:function(b){return b instanceof ArrayBuffer},string:function(b){return typeof b=="string"&&b.length>0},number:function(b){return typeof b=="number"&&!Number.isNaN(b)},integer:function(b){return Number.isInteger(b)},inRange:function(b,p,E){return b>=p&&b<=E},inArray:function(b,p){return p.includes(b)},invalidParameterError:function(b,p,E){return new Error(`Expected ${p} for ${b} but received ${E} of type ${typeof E}`)},nativeError:function(b,p){return p.message=b.message,p}},Y}function U(h){throw new Error('Could not dynamically require "'+h+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Z={exports:{}},ee,He;function Wr(){if(He)return ee;He=1;const h=()=>process.platform==="linux";let e=null;return ee={isLinux:h,getReport:()=>{if(!e)if(h()&&process.report){const w=process.report.excludeNetwork;process.report.excludeNetwork=!0,e=process.report.getReport(),process.report.excludeNetwork=w}else e={};return e}},ee}var re,Xe;function Hr(){if(Xe)return re;Xe=1;const h=D;return re={LDD_PATH:"/usr/bin/ldd",readFileSync:a=>h.readFileSync(a,"utf-8"),readFile:a=>new Promise((c,o)=>{h.readFile(a,"utf-8",(l,i)=>{l?o(l):c(i)})})},re}var te,Ve;function De(){if(Ve)return te;Ve=1;const h=D,{isLinux:e,getReport:g}=Wr(),{LDD_PATH:w,readFile:a,readFileSync:c}=Hr();let o,l;const i="getconf GNU_LIBC_VERSION 2>&1 || true; ldd --version 2>&1 || true";let n="";const f=()=>n||new Promise(v=>{h.exec(i,(R,r)=>{n=R?" ":r,v(n)})}),u=()=>{if(!n)try{n=h.execSync(i,{encoding:"utf8"})}catch{n=" "}return n},t="glibc",d=/LIBC[a-z0-9 \-).]*?(\d+\.\d+)/i,s="musl",b=v=>v.includes("libc.musl-")||v.includes("ld-musl-"),p=()=>{const v=g();return v.header&&v.header.glibcVersionRuntime?t:Array.isArray(v.sharedObjects)&&v.sharedObjects.some(b)?s:null},E=v=>{const[R,r]=v.split(/[\r\n]+/);return R&&R.includes(t)?t:r&&r.includes(s)?s:null},k=v=>v.includes("musl")?s:v.includes("GNU C Library")?t:null,j=async()=>{if(o!==void 0)return o;o=null;try{const v=await a(w);o=k(v)}catch{}return o},O=()=>{if(o!==void 0)return o;o=null;try{const v=c(w);o=k(v)}catch{}return o},_=async()=>{let v=null;if(e()&&(v=await j(),v||(v=p()),!v)){const R=await f();v=E(R)}return v},F=()=>{let v=null;if(e()&&(v=O(),v||(v=p()),!v)){const R=u();v=E(R)}return v},m=async()=>e()&&await _()!==t,x=()=>e()&&F()!==t,N=async()=>{if(l!==void 0)return l;l=null;try{const R=(await a(w)).match(d);R&&(l=R[1])}catch{}return l},G=()=>{if(l!==void 0)return l;l=null;try{const R=c(w).match(d);R&&(l=R[1])}catch{}return l},M=()=>{const v=g();return v.header&&v.header.glibcVersionRuntime?v.header.glibcVersionRuntime:null},B=v=>v.trim().split(/\s+/)[1],T=v=>{const[R,r,y]=v.split(/[\r\n]+/);return R&&R.includes(t)?B(R):r&&y&&r.includes(s)?B(y):null};return te={GLIBC:t,MUSL:s,family:_,familySync:F,isNonGlibcLinux:m,isNonGlibcLinuxSync:x,version:async()=>{let v=null;if(e()&&(v=await N(),v||(v=M()),!v)){const R=await f();v=T(R)}return v},versionSync:()=>{let v=null;if(e()&&(v=G(),v||(v=M()),!v)){const R=u();v=T(R)}return v}},te}var ie,Qe;function Q(){if(Qe)return ie;Qe=1;var h={};return ie=typeof process=="object"&&h&&h.NODE_DEBUG&&/\bsemver\b/i.test(h.NODE_DEBUG)?(...g)=>console.error("SEMVER",...g):()=>{},ie}var ne,Je;function ze(){if(Je)return ne;Je=1;const h="2.0.0",e=256,g=Number.MAX_SAFE_INTEGER||9007199254740991,w=16,a=e-6;return ne={MAX_LENGTH:e,MAX_SAFE_COMPONENT_LENGTH:w,MAX_SAFE_BUILD_LENGTH:a,MAX_SAFE_INTEGER:g,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:h,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},ne}var V={exports:{}},Ke;function J(){return Ke||(Ke=1,function(h,e){const{MAX_SAFE_COMPONENT_LENGTH:g,MAX_SAFE_BUILD_LENGTH:w,MAX_LENGTH:a}=ze(),c=Q();e=h.exports={};const o=e.re=[],l=e.safeRe=[],i=e.src=[],n=e.t={};let f=0;const u="[a-zA-Z0-9-]",t=[["\\s",1],["\\d",a],[u,w]],d=b=>{for(const[p,E]of t)b=b.split(`${p}*`).join(`${p}{0,${E}}`).split(`${p}+`).join(`${p}{1,${E}}`);return b},s=(b,p,E)=>{const k=d(p),j=f++;c(b,j,p),n[b]=j,i[j]=p,o[j]=new RegExp(p,E?"g":void 0),l[j]=new RegExp(k,E?"g":void 0)};s("NUMERICIDENTIFIER","0|[1-9]\\d*"),s("NUMERICIDENTIFIERLOOSE","\\d+"),s("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${u}*`),s("MAINVERSION",`(${i[n.NUMERICIDENTIFIER]})\\.(${i[n.NUMERICIDENTIFIER]})\\.(${i[n.NUMERICIDENTIFIER]})`),s("MAINVERSIONLOOSE",`(${i[n.NUMERICIDENTIFIERLOOSE]})\\.(${i[n.NUMERICIDENTIFIERLOOSE]})\\.(${i[n.NUMERICIDENTIFIERLOOSE]})`),s("PRERELEASEIDENTIFIER",`(?:${i[n.NUMERICIDENTIFIER]}|${i[n.NONNUMERICIDENTIFIER]})`),s("PRERELEASEIDENTIFIERLOOSE",`(?:${i[n.NUMERICIDENTIFIERLOOSE]}|${i[n.NONNUMERICIDENTIFIER]})`),s("PRERELEASE",`(?:-(${i[n.PRERELEASEIDENTIFIER]}(?:\\.${i[n.PRERELEASEIDENTIFIER]})*))`),s("PRERELEASELOOSE",`(?:-?(${i[n.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${i[n.PRERELEASEIDENTIFIERLOOSE]})*))`),s("BUILDIDENTIFIER",`${u}+`),s("BUILD",`(?:\\+(${i[n.BUILDIDENTIFIER]}(?:\\.${i[n.BUILDIDENTIFIER]})*))`),s("FULLPLAIN",`v?${i[n.MAINVERSION]}${i[n.PRERELEASE]}?${i[n.BUILD]}?`),s("FULL",`^${i[n.FULLPLAIN]}$`),s("LOOSEPLAIN",`[v=\\s]*${i[n.MAINVERSIONLOOSE]}${i[n.PRERELEASELOOSE]}?${i[n.BUILD]}?`),s("LOOSE",`^${i[n.LOOSEPLAIN]}$`),s("GTLT","((?:<|>)?=?)"),s("XRANGEIDENTIFIERLOOSE",`${i[n.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),s("XRANGEIDENTIFIER",`${i[n.NUMERICIDENTIFIER]}|x|X|\\*`),s("XRANGEPLAIN",`[v=\\s]*(${i[n.XRANGEIDENTIFIER]})(?:\\.(${i[n.XRANGEIDENTIFIER]})(?:\\.(${i[n.XRANGEIDENTIFIER]})(?:${i[n.PRERELEASE]})?${i[n.BUILD]}?)?)?`),s("XRANGEPLAINLOOSE",`[v=\\s]*(${i[n.XRANGEIDENTIFIERLOOSE]})(?:\\.(${i[n.XRANGEIDENTIFIERLOOSE]})(?:\\.(${i[n.XRANGEIDENTIFIERLOOSE]})(?:${i[n.PRERELEASELOOSE]})?${i[n.BUILD]}?)?)?`),s("XRANGE",`^${i[n.GTLT]}\\s*${i[n.XRANGEPLAIN]}$`),s("XRANGELOOSE",`^${i[n.GTLT]}\\s*${i[n.XRANGEPLAINLOOSE]}$`),s("COERCEPLAIN",`(^|[^\\d])(\\d{1,${g}})(?:\\.(\\d{1,${g}}))?(?:\\.(\\d{1,${g}}))?`),s("COERCE",`${i[n.COERCEPLAIN]}(?:$|[^\\d])`),s("COERCEFULL",i[n.COERCEPLAIN]+`(?:${i[n.PRERELEASE]})?(?:${i[n.BUILD]})?(?:$|[^\\d])`),s("COERCERTL",i[n.COERCE],!0),s("COERCERTLFULL",i[n.COERCEFULL],!0),s("LONETILDE","(?:~>?)"),s("TILDETRIM",`(\\s*)${i[n.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",s("TILDE",`^${i[n.LONETILDE]}${i[n.XRANGEPLAIN]}$`),s("TILDELOOSE",`^${i[n.LONETILDE]}${i[n.XRANGEPLAINLOOSE]}$`),s("LONECARET","(?:\\^)"),s("CARETTRIM",`(\\s*)${i[n.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",s("CARET",`^${i[n.LONECARET]}${i[n.XRANGEPLAIN]}$`),s("CARETLOOSE",`^${i[n.LONECARET]}${i[n.XRANGEPLAINLOOSE]}$`),s("COMPARATORLOOSE",`^${i[n.GTLT]}\\s*(${i[n.LOOSEPLAIN]})$|^$`),s("COMPARATOR",`^${i[n.GTLT]}\\s*(${i[n.FULLPLAIN]})$|^$`),s("COMPARATORTRIM",`(\\s*)${i[n.GTLT]}\\s*(${i[n.LOOSEPLAIN]}|${i[n.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",s("HYPHENRANGE",`^\\s*(${i[n.XRANGEPLAIN]})\\s+-\\s+(${i[n.XRANGEPLAIN]})\\s*$`),s("HYPHENRANGELOOSE",`^\\s*(${i[n.XRANGEPLAINLOOSE]})\\s+-\\s+(${i[n.XRANGEPLAINLOOSE]})\\s*$`),s("STAR","(<|>)?=?\\s*\\*"),s("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),s("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(V,V.exports)),V.exports}var ae,Ye;function Ge(){if(Ye)return ae;Ye=1;const h=Object.freeze({loose:!0}),e=Object.freeze({});return ae=w=>w?typeof w!="object"?h:w:e,ae}var se,Ze;function Xr(){if(Ze)return se;Ze=1;const h=/^[0-9]+$/,e=(w,a)=>{const c=h.test(w),o=h.test(a);return c&&o&&(w=+w,a=+a),w===a?0:c&&!o?-1:o&&!c?1:w<a?-1:1};return se={compareIdentifiers:e,rcompareIdentifiers:(w,a)=>e(a,w)},se}var oe,er;function X(){if(er)return oe;er=1;const h=Q(),{MAX_LENGTH:e,MAX_SAFE_INTEGER:g}=ze(),{safeRe:w,t:a}=J(),c=Ge(),{compareIdentifiers:o}=Xr();class l{constructor(n,f){if(f=c(f),n instanceof l){if(n.loose===!!f.loose&&n.includePrerelease===!!f.includePrerelease)return n;n=n.version}else if(typeof n!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof n}".`);if(n.length>e)throw new TypeError(`version is longer than ${e} characters`);h("SemVer",n,f),this.options=f,this.loose=!!f.loose,this.includePrerelease=!!f.includePrerelease;const u=n.trim().match(f.loose?w[a.LOOSE]:w[a.FULL]);if(!u)throw new TypeError(`Invalid Version: ${n}`);if(this.raw=n,this.major=+u[1],this.minor=+u[2],this.patch=+u[3],this.major>g||this.major<0)throw new TypeError("Invalid major version");if(this.minor>g||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>g||this.patch<0)throw new TypeError("Invalid patch version");u[4]?this.prerelease=u[4].split(".").map(t=>{if(/^[0-9]+$/.test(t)){const d=+t;if(d>=0&&d<g)return d}return t}):this.prerelease=[],this.build=u[5]?u[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(n){if(h("SemVer.compare",this.version,this.options,n),!(n instanceof l)){if(typeof n=="string"&&n===this.version)return 0;n=new l(n,this.options)}return n.version===this.version?0:this.compareMain(n)||this.comparePre(n)}compareMain(n){return n instanceof l||(n=new l(n,this.options)),o(this.major,n.major)||o(this.minor,n.minor)||o(this.patch,n.patch)}comparePre(n){if(n instanceof l||(n=new l(n,this.options)),this.prerelease.length&&!n.prerelease.length)return-1;if(!this.prerelease.length&&n.prerelease.length)return 1;if(!this.prerelease.length&&!n.prerelease.length)return 0;let f=0;do{const u=this.prerelease[f],t=n.prerelease[f];if(h("prerelease compare",f,u,t),u===void 0&&t===void 0)return 0;if(t===void 0)return 1;if(u===void 0)return-1;if(u===t)continue;return o(u,t)}while(++f)}compareBuild(n){n instanceof l||(n=new l(n,this.options));let f=0;do{const u=this.build[f],t=n.build[f];if(h("build compare",f,u,t),u===void 0&&t===void 0)return 0;if(t===void 0)return 1;if(u===void 0)return-1;if(u===t)continue;return o(u,t)}while(++f)}inc(n,f,u){switch(n){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",f,u);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",f,u);break;case"prepatch":this.prerelease.length=0,this.inc("patch",f,u),this.inc("pre",f,u);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",f,u),this.inc("pre",f,u);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const t=Number(u)?1:0;if(!f&&u===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[t];else{let d=this.prerelease.length;for(;--d>=0;)typeof this.prerelease[d]=="number"&&(this.prerelease[d]++,d=-2);if(d===-1){if(f===this.prerelease.join(".")&&u===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(t)}}if(f){let d=[f,t];u===!1&&(d=[f]),o(this.prerelease[0],f)===0?isNaN(this.prerelease[1])&&(this.prerelease=d):this.prerelease=d}break}default:throw new Error(`invalid increment argument: ${n}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return oe=l,oe}var le,rr;function Vr(){if(rr)return le;rr=1;const h=X();return le=(g,w,a=!1)=>{if(g instanceof h)return g;try{return new h(g,w)}catch(c){if(!a)return null;throw c}},le}var ce,tr;function Qr(){if(tr)return ce;tr=1;const h=X(),e=Vr(),{safeRe:g,t:w}=J();return ce=(c,o)=>{if(c instanceof h)return c;if(typeof c=="number"&&(c=String(c)),typeof c!="string")return null;o=o||{};let l=null;if(!o.rtl)l=c.match(o.includePrerelease?g[w.COERCEFULL]:g[w.COERCE]);else{const d=o.includePrerelease?g[w.COERCERTLFULL]:g[w.COERCERTL];let s;for(;(s=d.exec(c))&&(!l||l.index+l[0].length!==c.length);)(!l||s.index+s[0].length!==l.index+l[0].length)&&(l=s),d.lastIndex=s.index+s[1].length+s[2].length;d.lastIndex=-1}if(l===null)return null;const i=l[2],n=l[3]||"0",f=l[4]||"0",u=o.includePrerelease&&l[5]?`-${l[5]}`:"",t=o.includePrerelease&&l[6]?`+${l[6]}`:"";return e(`${i}.${n}.${f}${u}${t}`,o)},ce}var he,ir;function W(){if(ir)return he;ir=1;const h=X();return he=(g,w,a)=>new h(g,a).compare(new h(w,a)),he}var fe,nr;function Or(){if(nr)return fe;nr=1;const h=W();return fe=(g,w,a)=>h(g,w,a)>=0,fe}var ue,ar;function Jr(){if(ar)return ue;ar=1;class h{constructor(){this.max=1e3,this.map=new Map}get(g){const w=this.map.get(g);if(w!==void 0)return this.map.delete(g),this.map.set(g,w),w}delete(g){return this.map.delete(g)}set(g,w){if(!this.delete(g)&&w!==void 0){if(this.map.size>=this.max){const c=this.map.keys().next().value;this.delete(c)}this.map.set(g,w)}return this}}return ue=h,ue}var de,sr;function Kr(){if(sr)return de;sr=1;const h=W();return de=(g,w,a)=>h(g,w,a)===0,de}var me,or;function Yr(){if(or)return me;or=1;const h=W();return me=(g,w,a)=>h(g,w,a)!==0,me}var ge,lr;function Zr(){if(lr)return ge;lr=1;const h=W();return ge=(g,w,a)=>h(g,w,a)>0,ge}var be,cr;function et(){if(cr)return be;cr=1;const h=W();return be=(g,w,a)=>h(g,w,a)<0,be}var pe,hr;function rt(){if(hr)return pe;hr=1;const h=W();return pe=(g,w,a)=>h(g,w,a)<=0,pe}var ve,fr;function tt(){if(fr)return ve;fr=1;const h=Kr(),e=Yr(),g=Zr(),w=Or(),a=et(),c=rt();return ve=(l,i,n,f)=>{switch(i){case"===":return typeof l=="object"&&(l=l.version),typeof n=="object"&&(n=n.version),l===n;case"!==":return typeof l=="object"&&(l=l.version),typeof n=="object"&&(n=n.version),l!==n;case"":case"=":case"==":return h(l,n,f);case"!=":return e(l,n,f);case">":return g(l,n,f);case">=":return w(l,n,f);case"<":return a(l,n,f);case"<=":return c(l,n,f);default:throw new TypeError(`Invalid operator: ${i}`)}},ve}var we,ur;function it(){if(ur)return we;ur=1;const h=Symbol("SemVer ANY");class e{static get ANY(){return h}constructor(f,u){if(u=g(u),f instanceof e){if(f.loose===!!u.loose)return f;f=f.value}f=f.trim().split(/\s+/).join(" "),o("comparator",f,u),this.options=u,this.loose=!!u.loose,this.parse(f),this.semver===h?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(f){const u=this.options.loose?w[a.COMPARATORLOOSE]:w[a.COMPARATOR],t=f.match(u);if(!t)throw new TypeError(`Invalid comparator: ${f}`);this.operator=t[1]!==void 0?t[1]:"",this.operator==="="&&(this.operator=""),t[2]?this.semver=new l(t[2],this.options.loose):this.semver=h}toString(){return this.value}test(f){if(o("Comparator.test",f,this.options.loose),this.semver===h||f===h)return!0;if(typeof f=="string")try{f=new l(f,this.options)}catch{return!1}return c(f,this.operator,this.semver,this.options)}intersects(f,u){if(!(f instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new i(f.value,u).test(this.value):f.operator===""?f.value===""?!0:new i(this.value,u).test(f.semver):(u=g(u),u.includePrerelease&&(this.value==="<0.0.0-0"||f.value==="<0.0.0-0")||!u.includePrerelease&&(this.value.startsWith("<0.0.0")||f.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&f.operator.startsWith(">")||this.operator.startsWith("<")&&f.operator.startsWith("<")||this.semver.version===f.semver.version&&this.operator.includes("=")&&f.operator.includes("=")||c(this.semver,"<",f.semver,u)&&this.operator.startsWith(">")&&f.operator.startsWith("<")||c(this.semver,">",f.semver,u)&&this.operator.startsWith("<")&&f.operator.startsWith(">")))}}we=e;const g=Ge(),{safeRe:w,t:a}=J(),c=tt(),o=Q(),l=X(),i=Fr();return we}var ye,dr;function Fr(){if(dr)return ye;dr=1;const h=/\s+/g;class e{constructor(P,v){if(v=a(v),P instanceof e)return P.loose===!!v.loose&&P.includePrerelease===!!v.includePrerelease?P:new e(P.raw,v);if(P instanceof c)return this.raw=P.value,this.set=[[P]],this.formatted=void 0,this;if(this.options=v,this.loose=!!v.loose,this.includePrerelease=!!v.includePrerelease,this.raw=P.trim().replace(h," "),this.set=this.raw.split("||").map(R=>this.parseRange(R.trim())).filter(R=>R.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const R=this.set[0];if(this.set=this.set.filter(r=>!b(r[0])),this.set.length===0)this.set=[R];else if(this.set.length>1){for(const r of this.set)if(r.length===1&&p(r[0])){this.set=[r];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let P=0;P<this.set.length;P++){P>0&&(this.formatted+="||");const v=this.set[P];for(let R=0;R<v.length;R++)R>0&&(this.formatted+=" "),this.formatted+=v[R].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(P){const R=((this.options.includePrerelease&&d)|(this.options.loose&&s))+":"+P,r=w.get(R);if(r)return r;const y=this.options.loose,I=y?i[n.HYPHENRANGELOOSE]:i[n.HYPHENRANGE];P=P.replace(I,B(this.options.includePrerelease)),o("hyphen replace",P),P=P.replace(i[n.COMPARATORTRIM],f),o("comparator trim",P),P=P.replace(i[n.TILDETRIM],u),o("tilde trim",P),P=P.replace(i[n.CARETTRIM],t),o("caret trim",P);let L=P.split(" ").map(C=>k(C,this.options)).join(" ").split(/\s+/).map(C=>M(C,this.options));y&&(L=L.filter(C=>(o("loose invalid filter",C,this.options),!!C.match(i[n.COMPARATORLOOSE])))),o("range list",L);const $=new Map,S=L.map(C=>new c(C,this.options));for(const C of S){if(b(C))return[C];$.set(C.value,C)}$.size>1&&$.has("")&&$.delete("");const q=[...$.values()];return w.set(R,q),q}intersects(P,v){if(!(P instanceof e))throw new TypeError("a Range is required");return this.set.some(R=>E(R,v)&&P.set.some(r=>E(r,v)&&R.every(y=>r.every(I=>y.intersects(I,v)))))}test(P){if(!P)return!1;if(typeof P=="string")try{P=new l(P,this.options)}catch{return!1}for(let v=0;v<this.set.length;v++)if(T(this.set[v],P,this.options))return!0;return!1}}ye=e;const g=Jr(),w=new g,a=Ge(),c=it(),o=Q(),l=X(),{safeRe:i,t:n,comparatorTrimReplace:f,tildeTrimReplace:u,caretTrimReplace:t}=J(),{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:s}=ze(),b=A=>A.value==="<0.0.0-0",p=A=>A.value==="",E=(A,P)=>{let v=!0;const R=A.slice();let r=R.pop();for(;v&&R.length;)v=R.every(y=>r.intersects(y,P)),r=R.pop();return v},k=(A,P)=>(o("comp",A,P),A=F(A,P),o("caret",A),A=O(A,P),o("tildes",A),A=x(A,P),o("xrange",A),A=G(A,P),o("stars",A),A),j=A=>!A||A.toLowerCase()==="x"||A==="*",O=(A,P)=>A.trim().split(/\s+/).map(v=>_(v,P)).join(" "),_=(A,P)=>{const v=P.loose?i[n.TILDELOOSE]:i[n.TILDE];return A.replace(v,(R,r,y,I,L)=>{o("tilde",A,R,r,y,I,L);let $;return j(r)?$="":j(y)?$=`>=${r}.0.0 <${+r+1}.0.0-0`:j(I)?$=`>=${r}.${y}.0 <${r}.${+y+1}.0-0`:L?(o("replaceTilde pr",L),$=`>=${r}.${y}.${I}-${L} <${r}.${+y+1}.0-0`):$=`>=${r}.${y}.${I} <${r}.${+y+1}.0-0`,o("tilde return",$),$})},F=(A,P)=>A.trim().split(/\s+/).map(v=>m(v,P)).join(" "),m=(A,P)=>{o("caret",A,P);const v=P.loose?i[n.CARETLOOSE]:i[n.CARET],R=P.includePrerelease?"-0":"";return A.replace(v,(r,y,I,L,$)=>{o("caret",A,r,y,I,L,$);let S;return j(y)?S="":j(I)?S=`>=${y}.0.0${R} <${+y+1}.0.0-0`:j(L)?y==="0"?S=`>=${y}.${I}.0${R} <${y}.${+I+1}.0-0`:S=`>=${y}.${I}.0${R} <${+y+1}.0.0-0`:$?(o("replaceCaret pr",$),y==="0"?I==="0"?S=`>=${y}.${I}.${L}-${$} <${y}.${I}.${+L+1}-0`:S=`>=${y}.${I}.${L}-${$} <${y}.${+I+1}.0-0`:S=`>=${y}.${I}.${L}-${$} <${+y+1}.0.0-0`):(o("no pr"),y==="0"?I==="0"?S=`>=${y}.${I}.${L}${R} <${y}.${I}.${+L+1}-0`:S=`>=${y}.${I}.${L}${R} <${y}.${+I+1}.0-0`:S=`>=${y}.${I}.${L} <${+y+1}.0.0-0`),o("caret return",S),S})},x=(A,P)=>(o("replaceXRanges",A,P),A.split(/\s+/).map(v=>N(v,P)).join(" ")),N=(A,P)=>{A=A.trim();const v=P.loose?i[n.XRANGELOOSE]:i[n.XRANGE];return A.replace(v,(R,r,y,I,L,$)=>{o("xRange",A,R,r,y,I,L,$);const S=j(y),q=S||j(I),C=q||j(L),H=C;return r==="="&&H&&(r=""),$=P.includePrerelease?"-0":"",S?r===">"||r==="<"?R="<0.0.0-0":R="*":r&&H?(q&&(I=0),L=0,r===">"?(r=">=",q?(y=+y+1,I=0,L=0):(I=+I+1,L=0)):r==="<="&&(r="<",q?y=+y+1:I=+I+1),r==="<"&&($="-0"),R=`${r+y}.${I}.${L}${$}`):q?R=`>=${y}.0.0${$} <${+y+1}.0.0-0`:C&&(R=`>=${y}.${I}.0${$} <${y}.${+I+1}.0-0`),o("xRange return",R),R})},G=(A,P)=>(o("replaceStars",A,P),A.trim().replace(i[n.STAR],"")),M=(A,P)=>(o("replaceGTE0",A,P),A.trim().replace(i[P.includePrerelease?n.GTE0PRE:n.GTE0],"")),B=A=>(P,v,R,r,y,I,L,$,S,q,C,H)=>(j(R)?v="":j(r)?v=`>=${R}.0.0${A?"-0":""}`:j(y)?v=`>=${R}.${r}.0${A?"-0":""}`:I?v=`>=${v}`:v=`>=${v}${A?"-0":""}`,j(S)?$="":j(q)?$=`<${+S+1}.0.0-0`:j(C)?$=`<${S}.${+q+1}.0-0`:H?$=`<=${S}.${q}.${C}-${H}`:A?$=`<${S}.${q}.${+C+1}-0`:$=`<=${$}`,`${v} ${$}`.trim()),T=(A,P,v)=>{for(let R=0;R<A.length;R++)if(!A[R].test(P))return!1;if(P.prerelease.length&&!v.includePrerelease){for(let R=0;R<A.length;R++)if(o(A[R].semver),A[R].semver!==c.ANY&&A[R].semver.prerelease.length>0){const r=A[R].semver;if(r.major===P.major&&r.minor===P.minor&&r.patch===P.patch)return!0}return!1}return!0};return ye}var Ee,mr;function nt(){if(mr)return Ee;mr=1;const h=Fr();return Ee=(g,w,a)=>{try{w=new h(w,a)}catch{return!1}return w.test(g)},Ee}const at="sharp",st="High performance Node.js image processing, the fastest module to resize JPEG, PNG, WebP, GIF, AVIF and TIFF images",ot="0.33.5",lt="Lovell Fuller <npm@lovell.info>",ct="https://sharp.pixelplumbing.com",ht=["Pierre Inglebert <pierre.inglebert@gmail.com>","Jonathan Ong <jonathanrichardong@gmail.com>","Chanon Sajjamanochai <chanon.s@gmail.com>","Juliano Julio <julianojulio@gmail.com>","Daniel Gasienica <daniel@gasienica.ch>","Julian Walker <julian@fiftythree.com>","Amit Pitaru <pitaru.amit@gmail.com>","Brandon Aaron <hello.brandon@aaron.sh>","Andreas Lind <andreas@one.com>","Maurus Cuelenaere <mcuelenaere@gmail.com>","Linus Unnebäck <linus@folkdatorn.se>","Victor Mateevitsi <mvictoras@gmail.com>","Alaric Holloway <alaric.holloway@gmail.com>","Bernhard K. Weisshuhn <bkw@codingforce.com>","Chris Riley <criley@primedia.com>","David Carley <dacarley@gmail.com>","John Tobin <john@limelightmobileinc.com>","Kenton Gray <kentongray@gmail.com>","Felix Bünemann <Felix.Buenemann@gmail.com>","Samy Al Zahrani <samyalzahrany@gmail.com>","Chintan Thakkar <lemnisk8@gmail.com>","F. Orlando Galashan <frulo@gmx.de>","Kleis Auke Wolthuizen <info@kleisauke.nl>","Matt Hirsch <mhirsch@media.mit.edu>","Matthias Thoemmes <thoemmes@gmail.com>","Patrick Paskaris <patrick@paskaris.gr>","Jérémy Lal <kapouer@melix.org>","Rahul Nanwani <r.nanwani@gmail.com>","Alice Monday <alice0meta@gmail.com>","Kristo Jorgenson <kristo.jorgenson@gmail.com>","YvesBos <yves_bos@outlook.com>","Guy Maliar <guy@tailorbrands.com>","Nicolas Coden <nicolas@ncoden.fr>","Matt Parrish <matt.r.parrish@gmail.com>","Marcel Bretschneider <marcel.bretschneider@gmail.com>","Matthew McEachen <matthew+github@mceachen.org>","Jarda Kotěšovec <jarda.kotesovec@gmail.com>","Kenric D'Souza <kenric.dsouza@gmail.com>","Oleh Aleinyk <oleg.aleynik@gmail.com>","Marcel Bretschneider <marcel.bretschneider@gmail.com>","Andrea Bianco <andrea.bianco@unibas.ch>","Rik Heywood <rik@rik.org>","Thomas Parisot <hi@oncletom.io>","Nathan Graves <nathanrgraves+github@gmail.com>","Tom Lokhorst <tom@lokhorst.eu>","Espen Hovlandsdal <espen@hovlandsdal.com>","Sylvain Dumont <sylvain.dumont35@gmail.com>","Alun Davies <alun.owain.davies@googlemail.com>","Aidan Hoolachan <ajhoolachan21@gmail.com>","Axel Eirola <axel.eirola@iki.fi>","Freezy <freezy@xbmc.org>","Daiz <taneli.vatanen@gmail.com>","Julian Aubourg <j@ubourg.net>","Keith Belovay <keith@picthrive.com>","Michael B. Klein <mbklein@gmail.com>","Jordan Prudhomme <jordan@raboland.fr>","Ilya Ovdin <iovdin@gmail.com>","Andargor <andargor@yahoo.com>","Paul Neave <paul.neave@gmail.com>","Brendan Kennedy <brenwken@gmail.com>","Brychan Bennett-Odlum <git@brychan.io>","Edward Silverton <e.silverton@gmail.com>","Roman Malieiev <aromaleev@gmail.com>","Tomas Szabo <tomas.szabo@deftomat.com>","Robert O'Rourke <robert@o-rourke.org>","Guillermo Alfonso Varela Chouciño <guillevch@gmail.com>","Christian Flintrup <chr@gigahost.dk>","Manan Jadhav <manan@motionden.com>","Leon Radley <leon@radley.se>","alza54 <alza54@thiocod.in>","Jacob Smith <jacob@frende.me>","Michael Nutt <michael@nutt.im>","Brad Parham <baparham@gmail.com>","Taneli Vatanen <taneli.vatanen@gmail.com>","Joris Dugué <zaruike10@gmail.com>","Chris Banks <christopher.bradley.banks@gmail.com>","Ompal Singh <ompal.hitm09@gmail.com>","Brodan <christopher.hranj@gmail.com>","Ankur Parihar <ankur.github@gmail.com>","Brahim Ait elhaj <brahima@gmail.com>","Mart Jansink <m.jansink@gmail.com>","Lachlan Newman <lachnewman007@gmail.com>","Dennis Beatty <dennis@dcbeatty.com>","Ingvar Stepanyan <me@rreverser.com>","Don Denton <don@happycollision.com>"],ft={install:"node install/check",clean:"rm -rf src/build/ .nyc_output/ coverage/ test/fixtures/output.*",test:"npm run test-lint && npm run test-unit && npm run test-licensing && npm run test-types","test-lint":"semistandard && cpplint","test-unit":"nyc --reporter=lcov --reporter=text --check-coverage --branches=100 mocha","test-licensing":'license-checker --production --summary --onlyAllow="Apache-2.0;BSD;ISC;LGPL-3.0-or-later;MIT"',"test-leak":"./test/leak/leak.sh","test-types":"tsd","package-from-local-build":"node npm/from-local-build","package-from-github-release":"node npm/from-github-release","docs-build":"node docs/build && node docs/search-index/build","docs-serve":"cd docs && npx serve","docs-publish":"cd docs && npx firebase-tools deploy --project pixelplumbing --only hosting:pixelplumbing-sharp"},ut="commonjs",dt="lib/index.js",mt="lib/index.d.ts",gt=["install","lib","src/*.{cc,h,gyp}"],bt={type:"git",url:"git://github.com/lovell/sharp.git"},pt=["jpeg","png","webp","avif","tiff","gif","svg","jp2","dzi","image","resize","thumbnail","crop","embed","libvips","vips"],vt={color:"^4.2.3","detect-libc":"^2.0.3",semver:"^7.6.3"},wt={"@img/sharp-darwin-arm64":"0.33.5","@img/sharp-darwin-x64":"0.33.5","@img/sharp-libvips-darwin-arm64":"1.0.4","@img/sharp-libvips-darwin-x64":"1.0.4","@img/sharp-libvips-linux-arm":"1.0.5","@img/sharp-libvips-linux-arm64":"1.0.4","@img/sharp-libvips-linux-s390x":"1.0.4","@img/sharp-libvips-linux-x64":"1.0.4","@img/sharp-libvips-linuxmusl-arm64":"1.0.4","@img/sharp-libvips-linuxmusl-x64":"1.0.4","@img/sharp-linux-arm":"0.33.5","@img/sharp-linux-arm64":"0.33.5","@img/sharp-linux-s390x":"0.33.5","@img/sharp-linux-x64":"0.33.5","@img/sharp-linuxmusl-arm64":"0.33.5","@img/sharp-linuxmusl-x64":"0.33.5","@img/sharp-wasm32":"0.33.5","@img/sharp-win32-ia32":"0.33.5","@img/sharp-win32-x64":"0.33.5"},yt={"@emnapi/runtime":"^1.2.0","@img/sharp-libvips-dev":"1.0.4","@img/sharp-libvips-dev-wasm32":"1.0.5","@img/sharp-libvips-win32-ia32":"1.0.4","@img/sharp-libvips-win32-x64":"1.0.4","@types/node":"*",async:"^3.2.5",cc:"^3.0.1",emnapi:"^1.2.0","exif-reader":"^2.0.1","extract-zip":"^2.0.1",icc:"^3.0.0","jsdoc-to-markdown":"^8.0.3","license-checker":"^25.0.1",mocha:"^10.7.3","node-addon-api":"^8.1.0",nyc:"^17.0.0",prebuild:"^13.0.1",semistandard:"^17.0.0","tar-fs":"^3.0.6",tsd:"^0.31.1"},Et="Apache-2.0",Pt={node:"^18.17.0 || ^20.3.0 || >=21.0.0"},xt={libvips:">=8.15.3"},Rt={url:"https://opencollective.com/libvips"},It={napi_versions:[9]},At={env:["mocha"]},$t={linelength:"120",filter:["build/include"]},Lt={include:["lib"]},jt={directory:"test/types/"},_r={name:at,description:st,version:ot,author:lt,homepage:ct,contributors:ht,scripts:ft,type:ut,main:dt,types:mt,files:gt,repository:bt,keywords:pt,dependencies:vt,optionalDependencies:wt,devDependencies:yt,license:Et,engines:Pt,config:xt,funding:Rt,binary:It,semistandard:At,cc:$t,nyc:Lt,tsd:jt};var Pe,gr;function Tr(){if(gr)return Pe;gr=1;var h={};const{spawnSync:e}=D,{createHash:g}=D,w=Qr(),a=Or(),c=nt(),o=De(),{config:l,engines:i,optionalDependencies:n}=_r,f=h.npm_package_config_libvips||l.libvips,u=w(f).version,t=["darwin-arm64","darwin-x64","linux-arm","linux-arm64","linux-s390x","linux-x64","linuxmusl-arm64","linuxmusl-x64","win32-ia32","win32-x64"],d={encoding:"utf8",shell:!0},s=P=>{P instanceof Error?console.error(`sharp: Installation error: ${P.message}`):console.log(`sharp: ${P}`)},b=()=>o.isNonGlibcLinuxSync()?o.familySync():"",p=()=>`${process.platform}${b()}-${process.arch}`,E=()=>{if(F())return"wasm32";const{npm_config_arch:P,npm_config_platform:v,npm_config_libc:R}=h,r=typeof R=="string"?R:b();return`${v||process.platform}${r}-${P||process.arch}`},k=()=>{try{return U(`@img/sharp-libvips-dev-${E()}/include`)}catch{try{return require("@img/sharp-libvips-dev/include")}catch{}}return""},j=()=>{try{return require("@img/sharp-libvips-dev/cplusplus")}catch{}return""},O=()=>{try{return U(`@img/sharp-libvips-dev-${E()}/lib`)}catch{try{return U(`@img/sharp-libvips-${E()}/lib`)}catch{}}return""},_=()=>{if(process.release?.name==="node"&&process.versions&&!c(process.versions.node,i.node))return{found:process.versions.node,expected:i.node}},F=()=>{const{CC:P}=h;return!!(P&&P.endsWith("/emcc"))},m=()=>process.platform==="darwin"&&process.arch==="x64"?(e("sysctl sysctl.proc_translated",d).stdout||"").trim()==="sysctl.proc_translated: 1":!1,x=P=>g("sha512").update(P).digest("hex"),N=()=>{try{const P=x(`imgsharp-libvips-${E()}`),v=w(n[`@img/sharp-libvips-${E()}`]).version;return x(`${P}npm:${v}`).slice(0,10)}catch{}return""},G=()=>e(`node-gyp rebuild --directory=src ${F()?"--nodedir=emscripten":""}`,{...d,stdio:"inherit"}).status,M=()=>process.platform!=="win32"?(e("pkg-config --modversion vips-cpp",{...d,env:{...h,PKG_CONFIG_PATH:B()}}).stdout||"").trim():"",B=()=>process.platform!=="win32"?[(e('which brew >/dev/null 2>&1 && brew environment --plain | grep PKG_CONFIG_LIBDIR | cut -d" " -f2',d).stdout||"").trim(),h.PKG_CONFIG_PATH,"/usr/local/lib/pkgconfig","/usr/lib/pkgconfig","/usr/local/libdata/pkgconfig","/usr/libdata/pkgconfig"].filter(Boolean).join(":"):"",T=(P,v,R)=>(R&&R(`Detected ${v}, skipping search for globally-installed libvips`),P);return Pe={minimumLibvipsVersion:u,prebuiltPlatforms:t,buildPlatformArch:E,buildSharpLibvipsIncludeDir:k,buildSharpLibvipsCPlusPlusDir:j,buildSharpLibvipsLibDir:O,isUnsupportedNodeRuntime:_,runtimePlatformArch:p,log:s,yarnLocator:N,spawnRebuild:G,globalLibvipsVersion:M,pkgConfigPath:B,useGlobalLibvips:P=>{if(h.SHARP_IGNORE_GLOBAL_LIBVIPS)return T(!1,"SHARP_IGNORE_GLOBAL_LIBVIPS",P);if(h.SHARP_FORCE_GLOBAL_LIBVIPS)return T(!0,"SHARP_FORCE_GLOBAL_LIBVIPS",P);if(m())return T(!1,"Rosetta",P);const v=M();return!!v&&a(v,u)}},Pe}var br;function K(){if(br)return Z.exports;br=1;const{familySync:h,versionSync:e}=De(),{runtimePlatformArch:g,isUnsupportedNodeRuntime:w,prebuiltPlatforms:a,minimumLibvipsVersion:c}=Tr(),o=g(),l=[`../src/build/Release/sharp-${o}.node`,"../src/build/Release/sharp-wasm32.node",`@img/sharp-${o}/sharp.node`,"@img/sharp-wasm32/sharp.node"];let i;const n=[];for(const f of l)try{i=U(f);break}catch(u){n.push(u)}if(i)Z.exports=i;else{const[f,u,t]=["linux","darwin","win32"].map(b=>o.startsWith(b)),d=[`Could not load the "sharp" module using the ${o} runtime`];n.forEach(b=>{b.code!=="MODULE_NOT_FOUND"&&d.push(`${b.code}: ${b.message}`)});const s=n.map(b=>b.message).join(" ");if(d.push("Possible solutions:"),w()){const{found:b,expected:p}=w();d.push("- Please upgrade Node.js:",`    Found ${b}`,`    Requires ${p}`)}else if(a.includes(o)){const[b,p]=o.split("-"),E=b.endsWith("musl")?" --libc=musl":"";d.push("- Ensure optional dependencies can be installed:","    npm install --include=optional sharp","- Ensure your package manager supports multi-platform installation:","    See https://sharp.pixelplumbing.com/install#cross-platform","- Add platform-specific dependencies:",`    npm install --os=${b.replace("musl","")}${E} --cpu=${p} sharp`)}else d.push(`- Manually install libvips >= ${c}`,"- Add experimental WebAssembly-based dependencies:","    npm install --cpu=wasm32 sharp","    npm install @img/sharp-wasm32");if(f&&/(symbol not found|CXXABI_)/i.test(s))try{const{config:b}=U(`@img/sharp-libvips-${o}/package`),p=`${h()} ${e()}`,E=`${b.musl?"musl":"glibc"} ${b.musl||b.glibc}`;d.push("- Update your OS:",`    Found ${p}`,`    Requires ${E}`)}catch{}throw f&&/\/snap\/core[0-9]{2}/.test(s)&&d.push("- Remove the Node.js Snap, which does not support native modules","    snap remove node"),u&&/Incompatible library version/.test(s)&&d.push("- Update Homebrew:","    brew update && brew upgrade vips"),n.some(b=>b.code==="ERR_DLOPEN_DISABLED")&&d.push("- Run Node.js without using the --no-addons flag"),t&&/The specified procedure could not be found/.test(s)&&d.push("- Using the canvas package on Windows?","    See https://sharp.pixelplumbing.com/install#canvas-and-windows","- Check for outdated versions of sharp in the dependency tree:","    npm ls sharp"),d.push("- Consult the installation documentation:","    See https://sharp.pixelplumbing.com/install"),new Error(d.join(`
`))}return Z.exports}var xe,pr;function St(){if(pr)return xe;pr=1;const h=D,e=D,g=z();K();const w=h.debuglog("sharp"),a=function(o,l){if(arguments.length===1&&!g.defined(o))throw new Error("Invalid input");return this instanceof a?(e.Duplex.call(this),this.options={topOffsetPre:-1,leftOffsetPre:-1,widthPre:-1,heightPre:-1,topOffsetPost:-1,leftOffsetPost:-1,widthPost:-1,heightPost:-1,width:-1,height:-1,canvas:"crop",position:0,resizeBackground:[0,0,0,255],useExifOrientation:!1,angle:0,rotationAngle:0,rotationBackground:[0,0,0,255],rotateBeforePreExtract:!1,flip:!1,flop:!1,extendTop:0,extendBottom:0,extendLeft:0,extendRight:0,extendBackground:[0,0,0,255],extendWith:"background",withoutEnlargement:!1,withoutReduction:!1,affineMatrix:[],affineBackground:[0,0,0,255],affineIdx:0,affineIdy:0,affineOdx:0,affineOdy:0,affineInterpolator:this.constructor.interpolators.bilinear,kernel:"lanczos3",fastShrinkOnLoad:!0,tint:[-1,0,0,0],flatten:!1,flattenBackground:[0,0,0],unflatten:!1,negate:!1,negateAlpha:!0,medianSize:0,blurSigma:0,precision:"integer",minAmpl:.2,sharpenSigma:0,sharpenM1:1,sharpenM2:2,sharpenX1:2,sharpenY2:10,sharpenY3:20,threshold:0,thresholdGrayscale:!0,trimBackground:[],trimThreshold:-1,trimLineArt:!1,gamma:0,gammaOut:0,greyscale:!1,normalise:!1,normaliseLower:1,normaliseUpper:99,claheWidth:0,claheHeight:0,claheMaxSlope:3,brightness:1,saturation:1,hue:0,lightness:0,booleanBufferIn:null,booleanFileIn:"",joinChannelIn:[],extractChannel:-1,removeAlpha:!1,ensureAlpha:-1,colourspace:"srgb",colourspacePipeline:"last",composite:[],fileOut:"",formatOut:"input",streamOut:!1,keepMetadata:0,withMetadataOrientation:-1,withMetadataDensity:0,withIccProfile:"",withExif:{},withExifMerge:!0,resolveWithObject:!1,jpegQuality:80,jpegProgressive:!1,jpegChromaSubsampling:"4:2:0",jpegTrellisQuantisation:!1,jpegOvershootDeringing:!1,jpegOptimiseScans:!1,jpegOptimiseCoding:!0,jpegQuantisationTable:0,pngProgressive:!1,pngCompressionLevel:6,pngAdaptiveFiltering:!1,pngPalette:!1,pngQuality:100,pngEffort:7,pngBitdepth:8,pngDither:1,jp2Quality:80,jp2TileHeight:512,jp2TileWidth:512,jp2Lossless:!1,jp2ChromaSubsampling:"4:4:4",webpQuality:80,webpAlphaQuality:100,webpLossless:!1,webpNearLossless:!1,webpSmartSubsample:!1,webpPreset:"default",webpEffort:4,webpMinSize:!1,webpMixed:!1,gifBitdepth:8,gifEffort:7,gifDither:1,gifInterFrameMaxError:0,gifInterPaletteMaxError:3,gifReuse:!0,gifProgressive:!1,tiffQuality:80,tiffCompression:"jpeg",tiffPredictor:"horizontal",tiffPyramid:!1,tiffMiniswhite:!1,tiffBitdepth:8,tiffTile:!1,tiffTileHeight:256,tiffTileWidth:256,tiffXres:1,tiffYres:1,tiffResolutionUnit:"inch",heifQuality:50,heifLossless:!1,heifCompression:"av1",heifEffort:4,heifChromaSubsampling:"4:4:4",heifBitdepth:8,jxlDistance:1,jxlDecodingTier:0,jxlEffort:7,jxlLossless:!1,rawDepth:"uchar",tileSize:256,tileOverlap:0,tileContainer:"fs",tileLayout:"dz",tileFormat:"last",tileDepth:"last",tileAngle:0,tileSkipBlanks:-1,tileBackground:[255,255,255,255],tileCentre:!1,tileId:"https://example.com/iiif",tileBasename:"",timeoutSeconds:0,linearA:[],linearB:[],debuglog:i=>{this.emit("warning",i),w(i)},queueListener:function(i){a.queue.emit("change",i)}},this.options.input=this._createInputDescriptor(o,l,{allowStream:!0}),this):new a(o,l)};Object.setPrototypeOf(a.prototype,e.Duplex.prototype),Object.setPrototypeOf(a,e.Duplex);function c(){const o=this.constructor.call(),{debuglog:l,queueListener:i,...n}=this.options;return o.options=structuredClone(n),o.options.debuglog=l,o.options.queueListener=i,this._isStreamInput()&&this.on("finish",()=>{this._flattenBufferIn(),o.options.input.buffer=this.options.input.buffer,o.emit("finish")}),o}return Object.assign(a.prototype,{clone:c}),xe=a,xe}var Re={exports:{}},Ie,vr;function Mr(){return vr||(vr=1,Ie={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),Ie}var Ae={exports:{}},$e,wr;function kt(){return wr||(wr=1,$e=function(e){return!e||typeof e=="string"?!1:e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String")}),$e}var yr;function Nt(){if(yr)return Ae.exports;yr=1;var h=kt(),e=Array.prototype.concat,g=Array.prototype.slice,w=Ae.exports=function(c){for(var o=[],l=0,i=c.length;l<i;l++){var n=c[l];h(n)?o=e.call(o,g.call(n)):o.push(n)}return o};return w.wrap=function(a){return function(){return a(w(arguments))}},Ae.exports}var Er;function Ct(){if(Er)return Re.exports;Er=1;var h=Mr(),e=Nt(),g=Object.hasOwnProperty,w=Object.create(null);for(var a in h)g.call(h,a)&&(w[h[a]]=a);var c=Re.exports={to:{},get:{}};c.get=function(i){var n=i.substring(0,3).toLowerCase(),f,u;switch(n){case"hsl":f=c.get.hsl(i),u="hsl";break;case"hwb":f=c.get.hwb(i),u="hwb";break;default:f=c.get.rgb(i),u="rgb";break}return f?{model:u,value:f}:null},c.get.rgb=function(i){if(!i)return null;var n=/^#([a-f0-9]{3,4})$/i,f=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,u=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,t=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,d=/^(\w+)$/,s=[0,0,0,1],b,p,E;if(b=i.match(f)){for(E=b[2],b=b[1],p=0;p<3;p++){var k=p*2;s[p]=parseInt(b.slice(k,k+2),16)}E&&(s[3]=parseInt(E,16)/255)}else if(b=i.match(n)){for(b=b[1],E=b[3],p=0;p<3;p++)s[p]=parseInt(b[p]+b[p],16);E&&(s[3]=parseInt(E+E,16)/255)}else if(b=i.match(u)){for(p=0;p<3;p++)s[p]=parseInt(b[p+1],0);b[4]&&(b[5]?s[3]=parseFloat(b[4])*.01:s[3]=parseFloat(b[4]))}else if(b=i.match(t)){for(p=0;p<3;p++)s[p]=Math.round(parseFloat(b[p+1])*2.55);b[4]&&(b[5]?s[3]=parseFloat(b[4])*.01:s[3]=parseFloat(b[4]))}else return(b=i.match(d))?b[1]==="transparent"?[0,0,0,0]:g.call(h,b[1])?(s=h[b[1]],s[3]=1,s):null:null;for(p=0;p<3;p++)s[p]=o(s[p],0,255);return s[3]=o(s[3],0,1),s},c.get.hsl=function(i){if(!i)return null;var n=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,f=i.match(n);if(f){var u=parseFloat(f[4]),t=(parseFloat(f[1])%360+360)%360,d=o(parseFloat(f[2]),0,100),s=o(parseFloat(f[3]),0,100),b=o(isNaN(u)?1:u,0,1);return[t,d,s,b]}return null},c.get.hwb=function(i){if(!i)return null;var n=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,f=i.match(n);if(f){var u=parseFloat(f[4]),t=(parseFloat(f[1])%360+360)%360,d=o(parseFloat(f[2]),0,100),s=o(parseFloat(f[3]),0,100),b=o(isNaN(u)?1:u,0,1);return[t,d,s,b]}return null},c.to.hex=function(){var i=e(arguments);return"#"+l(i[0])+l(i[1])+l(i[2])+(i[3]<1?l(Math.round(i[3]*255)):"")},c.to.rgb=function(){var i=e(arguments);return i.length<4||i[3]===1?"rgb("+Math.round(i[0])+", "+Math.round(i[1])+", "+Math.round(i[2])+")":"rgba("+Math.round(i[0])+", "+Math.round(i[1])+", "+Math.round(i[2])+", "+i[3]+")"},c.to.rgb.percent=function(){var i=e(arguments),n=Math.round(i[0]/255*100),f=Math.round(i[1]/255*100),u=Math.round(i[2]/255*100);return i.length<4||i[3]===1?"rgb("+n+"%, "+f+"%, "+u+"%)":"rgba("+n+"%, "+f+"%, "+u+"%, "+i[3]+")"},c.to.hsl=function(){var i=e(arguments);return i.length<4||i[3]===1?"hsl("+i[0]+", "+i[1]+"%, "+i[2]+"%)":"hsla("+i[0]+", "+i[1]+"%, "+i[2]+"%, "+i[3]+")"},c.to.hwb=function(){var i=e(arguments),n="";return i.length>=4&&i[3]!==1&&(n=", "+i[3]),"hwb("+i[0]+", "+i[1]+"%, "+i[2]+"%"+n+")"},c.to.keyword=function(i){return w[i.slice(0,3)]};function o(i,n,f){return Math.min(Math.max(n,i),f)}function l(i){var n=Math.round(i).toString(16).toUpperCase();return n.length<2?"0"+n:n}return Re.exports}var Le,Pr;function Br(){if(Pr)return Le;Pr=1;const h=Mr(),e={};for(const a of Object.keys(h))e[h[a]]=a;const g={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};Le=g;for(const a of Object.keys(g)){if(!("channels"in g[a]))throw new Error("missing channels property: "+a);if(!("labels"in g[a]))throw new Error("missing channel labels property: "+a);if(g[a].labels.length!==g[a].channels)throw new Error("channel and label counts mismatch: "+a);const{channels:c,labels:o}=g[a];delete g[a].channels,delete g[a].labels,Object.defineProperty(g[a],"channels",{value:c}),Object.defineProperty(g[a],"labels",{value:o})}g.rgb.hsl=function(a){const c=a[0]/255,o=a[1]/255,l=a[2]/255,i=Math.min(c,o,l),n=Math.max(c,o,l),f=n-i;let u,t;n===i?u=0:c===n?u=(o-l)/f:o===n?u=2+(l-c)/f:l===n&&(u=4+(c-o)/f),u=Math.min(u*60,360),u<0&&(u+=360);const d=(i+n)/2;return n===i?t=0:d<=.5?t=f/(n+i):t=f/(2-n-i),[u,t*100,d*100]},g.rgb.hsv=function(a){let c,o,l,i,n;const f=a[0]/255,u=a[1]/255,t=a[2]/255,d=Math.max(f,u,t),s=d-Math.min(f,u,t),b=function(p){return(d-p)/6/s+1/2};return s===0?(i=0,n=0):(n=s/d,c=b(f),o=b(u),l=b(t),f===d?i=l-o:u===d?i=1/3+c-l:t===d&&(i=2/3+o-c),i<0?i+=1:i>1&&(i-=1)),[i*360,n*100,d*100]},g.rgb.hwb=function(a){const c=a[0],o=a[1];let l=a[2];const i=g.rgb.hsl(a)[0],n=1/255*Math.min(c,Math.min(o,l));return l=1-1/255*Math.max(c,Math.max(o,l)),[i,n*100,l*100]},g.rgb.cmyk=function(a){const c=a[0]/255,o=a[1]/255,l=a[2]/255,i=Math.min(1-c,1-o,1-l),n=(1-c-i)/(1-i)||0,f=(1-o-i)/(1-i)||0,u=(1-l-i)/(1-i)||0;return[n*100,f*100,u*100,i*100]};function w(a,c){return(a[0]-c[0])**2+(a[1]-c[1])**2+(a[2]-c[2])**2}return g.rgb.keyword=function(a){const c=e[a];if(c)return c;let o=1/0,l;for(const i of Object.keys(h)){const n=h[i],f=w(a,n);f<o&&(o=f,l=i)}return l},g.keyword.rgb=function(a){return h[a]},g.rgb.xyz=function(a){let c=a[0]/255,o=a[1]/255,l=a[2]/255;c=c>.04045?((c+.055)/1.055)**2.4:c/12.92,o=o>.04045?((o+.055)/1.055)**2.4:o/12.92,l=l>.04045?((l+.055)/1.055)**2.4:l/12.92;const i=c*.4124+o*.3576+l*.1805,n=c*.2126+o*.7152+l*.0722,f=c*.0193+o*.1192+l*.9505;return[i*100,n*100,f*100]},g.rgb.lab=function(a){const c=g.rgb.xyz(a);let o=c[0],l=c[1],i=c[2];o/=95.047,l/=100,i/=108.883,o=o>.008856?o**(1/3):7.787*o+16/116,l=l>.008856?l**(1/3):7.787*l+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;const n=116*l-16,f=500*(o-l),u=200*(l-i);return[n,f,u]},g.hsl.rgb=function(a){const c=a[0]/360,o=a[1]/100,l=a[2]/100;let i,n,f;if(o===0)return f=l*255,[f,f,f];l<.5?i=l*(1+o):i=l+o-l*o;const u=2*l-i,t=[0,0,0];for(let d=0;d<3;d++)n=c+1/3*-(d-1),n<0&&n++,n>1&&n--,6*n<1?f=u+(i-u)*6*n:2*n<1?f=i:3*n<2?f=u+(i-u)*(2/3-n)*6:f=u,t[d]=f*255;return t},g.hsl.hsv=function(a){const c=a[0];let o=a[1]/100,l=a[2]/100,i=o;const n=Math.max(l,.01);l*=2,o*=l<=1?l:2-l,i*=n<=1?n:2-n;const f=(l+o)/2,u=l===0?2*i/(n+i):2*o/(l+o);return[c,u*100,f*100]},g.hsv.rgb=function(a){const c=a[0]/60,o=a[1]/100;let l=a[2]/100;const i=Math.floor(c)%6,n=c-Math.floor(c),f=255*l*(1-o),u=255*l*(1-o*n),t=255*l*(1-o*(1-n));switch(l*=255,i){case 0:return[l,t,f];case 1:return[u,l,f];case 2:return[f,l,t];case 3:return[f,u,l];case 4:return[t,f,l];case 5:return[l,f,u]}},g.hsv.hsl=function(a){const c=a[0],o=a[1]/100,l=a[2]/100,i=Math.max(l,.01);let n,f;f=(2-o)*l;const u=(2-o)*i;return n=o*i,n/=u<=1?u:2-u,n=n||0,f/=2,[c,n*100,f*100]},g.hwb.rgb=function(a){const c=a[0]/360;let o=a[1]/100,l=a[2]/100;const i=o+l;let n;i>1&&(o/=i,l/=i);const f=Math.floor(6*c),u=1-l;n=6*c-f,f&1&&(n=1-n);const t=o+n*(u-o);let d,s,b;switch(f){default:case 6:case 0:d=u,s=t,b=o;break;case 1:d=t,s=u,b=o;break;case 2:d=o,s=u,b=t;break;case 3:d=o,s=t,b=u;break;case 4:d=t,s=o,b=u;break;case 5:d=u,s=o,b=t;break}return[d*255,s*255,b*255]},g.cmyk.rgb=function(a){const c=a[0]/100,o=a[1]/100,l=a[2]/100,i=a[3]/100,n=1-Math.min(1,c*(1-i)+i),f=1-Math.min(1,o*(1-i)+i),u=1-Math.min(1,l*(1-i)+i);return[n*255,f*255,u*255]},g.xyz.rgb=function(a){const c=a[0]/100,o=a[1]/100,l=a[2]/100;let i,n,f;return i=c*3.2406+o*-1.5372+l*-.4986,n=c*-.9689+o*1.8758+l*.0415,f=c*.0557+o*-.204+l*1.057,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,n=n>.0031308?1.055*n**(1/2.4)-.055:n*12.92,f=f>.0031308?1.055*f**(1/2.4)-.055:f*12.92,i=Math.min(Math.max(0,i),1),n=Math.min(Math.max(0,n),1),f=Math.min(Math.max(0,f),1),[i*255,n*255,f*255]},g.xyz.lab=function(a){let c=a[0],o=a[1],l=a[2];c/=95.047,o/=100,l/=108.883,c=c>.008856?c**(1/3):7.787*c+16/116,o=o>.008856?o**(1/3):7.787*o+16/116,l=l>.008856?l**(1/3):7.787*l+16/116;const i=116*o-16,n=500*(c-o),f=200*(o-l);return[i,n,f]},g.lab.xyz=function(a){const c=a[0],o=a[1],l=a[2];let i,n,f;n=(c+16)/116,i=o/500+n,f=n-l/200;const u=n**3,t=i**3,d=f**3;return n=u>.008856?u:(n-16/116)/7.787,i=t>.008856?t:(i-16/116)/7.787,f=d>.008856?d:(f-16/116)/7.787,i*=95.047,n*=100,f*=108.883,[i,n,f]},g.lab.lch=function(a){const c=a[0],o=a[1],l=a[2];let i;i=Math.atan2(l,o)*360/2/Math.PI,i<0&&(i+=360);const f=Math.sqrt(o*o+l*l);return[c,f,i]},g.lch.lab=function(a){const c=a[0],o=a[1],i=a[2]/360*2*Math.PI,n=o*Math.cos(i),f=o*Math.sin(i);return[c,n,f]},g.rgb.ansi16=function(a,c=null){const[o,l,i]=a;let n=c===null?g.rgb.hsv(a)[2]:c;if(n=Math.round(n/50),n===0)return 30;let f=30+(Math.round(i/255)<<2|Math.round(l/255)<<1|Math.round(o/255));return n===2&&(f+=60),f},g.hsv.ansi16=function(a){return g.rgb.ansi16(g.hsv.rgb(a),a[2])},g.rgb.ansi256=function(a){const c=a[0],o=a[1],l=a[2];return c===o&&o===l?c<8?16:c>248?231:Math.round((c-8)/247*24)+232:16+36*Math.round(c/255*5)+6*Math.round(o/255*5)+Math.round(l/255*5)},g.ansi16.rgb=function(a){let c=a%10;if(c===0||c===7)return a>50&&(c+=3.5),c=c/10.5*255,[c,c,c];const o=(~~(a>50)+1)*.5,l=(c&1)*o*255,i=(c>>1&1)*o*255,n=(c>>2&1)*o*255;return[l,i,n]},g.ansi256.rgb=function(a){if(a>=232){const n=(a-232)*10+8;return[n,n,n]}a-=16;let c;const o=Math.floor(a/36)/5*255,l=Math.floor((c=a%36)/6)/5*255,i=c%6/5*255;return[o,l,i]},g.rgb.hex=function(a){const o=(((Math.round(a[0])&255)<<16)+((Math.round(a[1])&255)<<8)+(Math.round(a[2])&255)).toString(16).toUpperCase();return"000000".substring(o.length)+o},g.hex.rgb=function(a){const c=a.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!c)return[0,0,0];let o=c[0];c[0].length===3&&(o=o.split("").map(u=>u+u).join(""));const l=parseInt(o,16),i=l>>16&255,n=l>>8&255,f=l&255;return[i,n,f]},g.rgb.hcg=function(a){const c=a[0]/255,o=a[1]/255,l=a[2]/255,i=Math.max(Math.max(c,o),l),n=Math.min(Math.min(c,o),l),f=i-n;let u,t;return f<1?u=n/(1-f):u=0,f<=0?t=0:i===c?t=(o-l)/f%6:i===o?t=2+(l-c)/f:t=4+(c-o)/f,t/=6,t%=1,[t*360,f*100,u*100]},g.hsl.hcg=function(a){const c=a[1]/100,o=a[2]/100,l=o<.5?2*c*o:2*c*(1-o);let i=0;return l<1&&(i=(o-.5*l)/(1-l)),[a[0],l*100,i*100]},g.hsv.hcg=function(a){const c=a[1]/100,o=a[2]/100,l=c*o;let i=0;return l<1&&(i=(o-l)/(1-l)),[a[0],l*100,i*100]},g.hcg.rgb=function(a){const c=a[0]/360,o=a[1]/100,l=a[2]/100;if(o===0)return[l*255,l*255,l*255];const i=[0,0,0],n=c%1*6,f=n%1,u=1-f;let t=0;switch(Math.floor(n)){case 0:i[0]=1,i[1]=f,i[2]=0;break;case 1:i[0]=u,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=f;break;case 3:i[0]=0,i[1]=u,i[2]=1;break;case 4:i[0]=f,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=u}return t=(1-o)*l,[(o*i[0]+t)*255,(o*i[1]+t)*255,(o*i[2]+t)*255]},g.hcg.hsv=function(a){const c=a[1]/100,o=a[2]/100,l=c+o*(1-c);let i=0;return l>0&&(i=c/l),[a[0],i*100,l*100]},g.hcg.hsl=function(a){const c=a[1]/100,l=a[2]/100*(1-c)+.5*c;let i=0;return l>0&&l<.5?i=c/(2*l):l>=.5&&l<1&&(i=c/(2*(1-l))),[a[0],i*100,l*100]},g.hcg.hwb=function(a){const c=a[1]/100,o=a[2]/100,l=c+o*(1-c);return[a[0],(l-c)*100,(1-l)*100]},g.hwb.hcg=function(a){const c=a[1]/100,l=1-a[2]/100,i=l-c;let n=0;return i<1&&(n=(l-i)/(1-i)),[a[0],i*100,n*100]},g.apple.rgb=function(a){return[a[0]/65535*255,a[1]/65535*255,a[2]/65535*255]},g.rgb.apple=function(a){return[a[0]/255*65535,a[1]/255*65535,a[2]/255*65535]},g.gray.rgb=function(a){return[a[0]/100*255,a[0]/100*255,a[0]/100*255]},g.gray.hsl=function(a){return[0,0,a[0]]},g.gray.hsv=g.gray.hsl,g.gray.hwb=function(a){return[0,100,a[0]]},g.gray.cmyk=function(a){return[0,0,0,a[0]]},g.gray.lab=function(a){return[a[0],0,0]},g.gray.hex=function(a){const c=Math.round(a[0]/100*255)&255,l=((c<<16)+(c<<8)+c).toString(16).toUpperCase();return"000000".substring(l.length)+l},g.rgb.gray=function(a){return[(a[0]+a[1]+a[2])/3/255*100]},Le}var je,xr;function qt(){if(xr)return je;xr=1;const h=Br();function e(){const c={},o=Object.keys(h);for(let l=o.length,i=0;i<l;i++)c[o[i]]={distance:-1,parent:null};return c}function g(c){const o=e(),l=[c];for(o[c].distance=0;l.length;){const i=l.pop(),n=Object.keys(h[i]);for(let f=n.length,u=0;u<f;u++){const t=n[u],d=o[t];d.distance===-1&&(d.distance=o[i].distance+1,d.parent=i,l.unshift(t))}}return o}function w(c,o){return function(l){return o(c(l))}}function a(c,o){const l=[o[c].parent,c];let i=h[o[c].parent][c],n=o[c].parent;for(;o[n].parent;)l.unshift(o[n].parent),i=w(h[o[n].parent][n],i),n=o[n].parent;return i.conversion=l,i}return je=function(c){const o=g(c),l={},i=Object.keys(o);for(let n=i.length,f=0;f<n;f++){const u=i[f];o[u].parent!==null&&(l[u]=a(u,o))}return l},je}var Se,Rr;function Ot(){if(Rr)return Se;Rr=1;const h=Br(),e=qt(),g={},w=Object.keys(h);function a(o){const l=function(...i){const n=i[0];return n==null?n:(n.length>1&&(i=n),o(i))};return"conversion"in o&&(l.conversion=o.conversion),l}function c(o){const l=function(...i){const n=i[0];if(n==null)return n;n.length>1&&(i=n);const f=o(i);if(typeof f=="object")for(let u=f.length,t=0;t<u;t++)f[t]=Math.round(f[t]);return f};return"conversion"in o&&(l.conversion=o.conversion),l}return w.forEach(o=>{g[o]={},Object.defineProperty(g[o],"channels",{value:h[o].channels}),Object.defineProperty(g[o],"labels",{value:h[o].labels});const l=e(o);Object.keys(l).forEach(n=>{const f=l[n];g[o][n]=c(f),g[o][n].raw=a(f)})}),Se=g,Se}var ke,Ir;function Ue(){if(Ir)return ke;Ir=1;const h=Ct(),e=Ot(),g=["keyword","gray","hex"],w={};for(const t of Object.keys(e))w[[...e[t].labels].sort().join("")]=t;const a={};function c(t,d){if(!(this instanceof c))return new c(t,d);if(d&&d in g&&(d=null),d&&!(d in e))throw new Error("Unknown model: "+d);let s,b;if(t==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof c)this.model=t.model,this.color=[...t.color],this.valpha=t.valpha;else if(typeof t=="string"){const p=h.get(t);if(p===null)throw new Error("Unable to parse color from string: "+t);this.model=p.model,b=e[this.model].channels,this.color=p.value.slice(0,b),this.valpha=typeof p.value[b]=="number"?p.value[b]:1}else if(t.length>0){this.model=d||"rgb",b=e[this.model].channels;const p=Array.prototype.slice.call(t,0,b);this.color=u(p,b),this.valpha=typeof t[b]=="number"?t[b]:1}else if(typeof t=="number")this.model="rgb",this.color=[t>>16&255,t>>8&255,t&255],this.valpha=1;else{this.valpha=1;const p=Object.keys(t);"alpha"in t&&(p.splice(p.indexOf("alpha"),1),this.valpha=typeof t.alpha=="number"?t.alpha:0);const E=p.sort().join("");if(!(E in w))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=w[E];const{labels:k}=e[this.model],j=[];for(s=0;s<k.length;s++)j.push(t[k[s]]);this.color=u(j)}if(a[this.model])for(b=e[this.model].channels,s=0;s<b;s++){const p=a[this.model][s];p&&(this.color[s]=p(this.color[s]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}c.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(t){let d=this.model in h.to?this:this.rgb();d=d.round(typeof t=="number"?t:1);const s=d.valpha===1?d.color:[...d.color,this.valpha];return h.to[d.model](s)},percentString(t){const d=this.rgb().round(typeof t=="number"?t:1),s=d.valpha===1?d.color:[...d.color,this.valpha];return h.to.rgb.percent(s)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const t={},{channels:d}=e[this.model],{labels:s}=e[this.model];for(let b=0;b<d;b++)t[s[b]]=this.color[b];return this.valpha!==1&&(t.alpha=this.valpha),t},unitArray(){const t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,this.valpha!==1&&t.push(this.valpha),t},unitObject(){const t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,this.valpha!==1&&(t.alpha=this.valpha),t},round(t){return t=Math.max(t||0,0),new c([...this.color.map(l(t)),this.valpha],this.model)},alpha(t){return t!==void 0?new c([...this.color,Math.max(0,Math.min(1,t))],this.model):this.valpha},red:i("rgb",0,n(255)),green:i("rgb",1,n(255)),blue:i("rgb",2,n(255)),hue:i(["hsl","hsv","hsl","hwb","hcg"],0,t=>(t%360+360)%360),saturationl:i("hsl",1,n(100)),lightness:i("hsl",2,n(100)),saturationv:i("hsv",1,n(100)),value:i("hsv",2,n(100)),chroma:i("hcg",1,n(100)),gray:i("hcg",2,n(100)),white:i("hwb",1,n(100)),wblack:i("hwb",2,n(100)),cyan:i("cmyk",0,n(100)),magenta:i("cmyk",1,n(100)),yellow:i("cmyk",2,n(100)),black:i("cmyk",3,n(100)),x:i("xyz",0,n(95.047)),y:i("xyz",1,n(100)),z:i("xyz",2,n(108.833)),l:i("lab",0,n(100)),a:i("lab",1),b:i("lab",2),keyword(t){return t!==void 0?new c(t):e[this.model].keyword(this.color)},hex(t){return t!==void 0?new c(t):h.to.hex(this.rgb().round().color)},hexa(t){if(t!==void 0)return new c(t);const d=this.rgb().round().color;let s=Math.round(this.valpha*255).toString(16).toUpperCase();return s.length===1&&(s="0"+s),h.to.hex(d)+s},rgbNumber(){const t=this.rgb().color;return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255},luminosity(){const t=this.rgb().color,d=[];for(const[s,b]of t.entries()){const p=b/255;d[s]=p<=.04045?p/12.92:((p+.055)/1.055)**2.4}return .2126*d[0]+.7152*d[1]+.0722*d[2]},contrast(t){const d=this.luminosity(),s=t.luminosity();return d>s?(d+.05)/(s+.05):(s+.05)/(d+.05)},level(t){const d=this.contrast(t);return d>=7?"AAA":d>=4.5?"AA":""},isDark(){const t=this.rgb().color;return(t[0]*2126+t[1]*7152+t[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const t=this.rgb();for(let d=0;d<3;d++)t.color[d]=255-t.color[d];return t},lighten(t){const d=this.hsl();return d.color[2]+=d.color[2]*t,d},darken(t){const d=this.hsl();return d.color[2]-=d.color[2]*t,d},saturate(t){const d=this.hsl();return d.color[1]+=d.color[1]*t,d},desaturate(t){const d=this.hsl();return d.color[1]-=d.color[1]*t,d},whiten(t){const d=this.hwb();return d.color[1]+=d.color[1]*t,d},blacken(t){const d=this.hwb();return d.color[2]+=d.color[2]*t,d},grayscale(){const t=this.rgb().color,d=t[0]*.3+t[1]*.59+t[2]*.11;return c.rgb(d,d,d)},fade(t){return this.alpha(this.valpha-this.valpha*t)},opaquer(t){return this.alpha(this.valpha+this.valpha*t)},rotate(t){const d=this.hsl();let s=d.color[0];return s=(s+t)%360,s=s<0?360+s:s,d.color[0]=s,d},mix(t,d){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);const s=t.rgb(),b=this.rgb(),p=d===void 0?.5:d,E=2*p-1,k=s.alpha()-b.alpha(),j=((E*k===-1?E:(E+k)/(1+E*k))+1)/2,O=1-j;return c.rgb(j*s.red()+O*b.red(),j*s.green()+O*b.green(),j*s.blue()+O*b.blue(),s.alpha()*p+b.alpha()*(1-p))}};for(const t of Object.keys(e)){if(g.includes(t))continue;const{channels:d}=e[t];c.prototype[t]=function(...s){return this.model===t?new c(this):s.length>0?new c(s,t):new c([...f(e[this.model][t].raw(this.color)),this.valpha],t)},c[t]=function(...s){let b=s[0];return typeof b=="number"&&(b=u(s,d)),new c(b,t)}}function o(t,d){return Number(t.toFixed(d))}function l(t){return function(d){return o(d,t)}}function i(t,d,s){t=Array.isArray(t)?t:[t];for(const b of t)(a[b]||(a[b]=[]))[d]=s;return t=t[0],function(b){let p;return b!==void 0?(s&&(b=s(b)),p=this[t](),p.color[d]=b,p):(p=this[t]().color[d],s&&(p=s(p)),p)}}function n(t){return function(d){return Math.max(0,Math.min(t,d))}}function f(t){return Array.isArray(t)?t:[t]}function u(t,d){for(let s=0;s<d;s++)typeof t[s]!="number"&&(t[s]=0);return t}return ke=c,ke}var Ne,Ar;function Ft(){if(Ar)return Ne;Ar=1;const h=Ue(),e=z(),g=K(),w={left:"low",center:"centre",centre:"centre",right:"high"};function a(u){const{raw:t,density:d,limitInputPixels:s,ignoreIcc:b,unlimited:p,sequentialRead:E,failOn:k,failOnError:j,animated:O,page:_,pages:F,subifd:m}=u;return[t,d,s,b,p,E,k,j,O,_,F,m].some(e.defined)?{raw:t,density:d,limitInputPixels:s,ignoreIcc:b,unlimited:p,sequentialRead:E,failOn:k,failOnError:j,animated:O,page:_,pages:F,subifd:m}:void 0}function c(u,t,d){const s={failOn:"warning",limitInputPixels:Math.pow(16383,2),ignoreIcc:!1,unlimited:!1,sequentialRead:!0};if(e.string(u))s.file=u;else if(e.buffer(u)){if(u.length===0)throw Error("Input Buffer is empty");s.buffer=u}else if(e.arrayBuffer(u)){if(u.byteLength===0)throw Error("Input bit Array is empty");s.buffer=Buffer.from(u,0,u.byteLength)}else if(e.typedArray(u)){if(u.length===0)throw Error("Input Bit Array is empty");s.buffer=Buffer.from(u.buffer,u.byteOffset,u.byteLength)}else if(e.plainObject(u)&&!e.defined(t))t=u,a(t)&&(s.buffer=[]);else if(!e.defined(u)&&!e.defined(t)&&e.object(d)&&d.allowStream)s.buffer=[];else throw new Error(`Unsupported input '${u}' of type ${typeof u}${e.defined(t)?` when also providing options of type ${typeof t}`:""}`);if(e.object(t)){if(e.defined(t.failOnError))if(e.bool(t.failOnError))s.failOn=t.failOnError?"warning":"none";else throw e.invalidParameterError("failOnError","boolean",t.failOnError);if(e.defined(t.failOn))if(e.string(t.failOn)&&e.inArray(t.failOn,["none","truncated","error","warning"]))s.failOn=t.failOn;else throw e.invalidParameterError("failOn","one of: none, truncated, error, warning",t.failOn);if(e.defined(t.density))if(e.inRange(t.density,1,1e5))s.density=t.density;else throw e.invalidParameterError("density","number between 1 and 100000",t.density);if(e.defined(t.ignoreIcc))if(e.bool(t.ignoreIcc))s.ignoreIcc=t.ignoreIcc;else throw e.invalidParameterError("ignoreIcc","boolean",t.ignoreIcc);if(e.defined(t.limitInputPixels))if(e.bool(t.limitInputPixels))s.limitInputPixels=t.limitInputPixels?Math.pow(16383,2):0;else if(e.integer(t.limitInputPixels)&&e.inRange(t.limitInputPixels,0,Number.MAX_SAFE_INTEGER))s.limitInputPixels=t.limitInputPixels;else throw e.invalidParameterError("limitInputPixels","positive integer",t.limitInputPixels);if(e.defined(t.unlimited))if(e.bool(t.unlimited))s.unlimited=t.unlimited;else throw e.invalidParameterError("unlimited","boolean",t.unlimited);if(e.defined(t.sequentialRead))if(e.bool(t.sequentialRead))s.sequentialRead=t.sequentialRead;else throw e.invalidParameterError("sequentialRead","boolean",t.sequentialRead);if(e.defined(t.raw))if(e.object(t.raw)&&e.integer(t.raw.width)&&t.raw.width>0&&e.integer(t.raw.height)&&t.raw.height>0&&e.integer(t.raw.channels)&&e.inRange(t.raw.channels,1,4))switch(s.rawWidth=t.raw.width,s.rawHeight=t.raw.height,s.rawChannels=t.raw.channels,s.rawPremultiplied=!!t.raw.premultiplied,u.constructor){case Uint8Array:case Uint8ClampedArray:s.rawDepth="uchar";break;case Int8Array:s.rawDepth="char";break;case Uint16Array:s.rawDepth="ushort";break;case Int16Array:s.rawDepth="short";break;case Uint32Array:s.rawDepth="uint";break;case Int32Array:s.rawDepth="int";break;case Float32Array:s.rawDepth="float";break;case Float64Array:s.rawDepth="double";break;default:s.rawDepth="uchar";break}else throw new Error("Expected width, height and channels for raw pixel input");if(e.defined(t.animated))if(e.bool(t.animated))s.pages=t.animated?-1:1;else throw e.invalidParameterError("animated","boolean",t.animated);if(e.defined(t.pages))if(e.integer(t.pages)&&e.inRange(t.pages,-1,1e5))s.pages=t.pages;else throw e.invalidParameterError("pages","integer between -1 and 100000",t.pages);if(e.defined(t.page))if(e.integer(t.page)&&e.inRange(t.page,0,1e5))s.page=t.page;else throw e.invalidParameterError("page","integer between 0 and 100000",t.page);if(e.defined(t.level))if(e.integer(t.level)&&e.inRange(t.level,0,256))s.level=t.level;else throw e.invalidParameterError("level","integer between 0 and 256",t.level);if(e.defined(t.subifd))if(e.integer(t.subifd)&&e.inRange(t.subifd,-1,1e5))s.subifd=t.subifd;else throw e.invalidParameterError("subifd","integer between -1 and 100000",t.subifd);if(e.defined(t.create))if(e.object(t.create)&&e.integer(t.create.width)&&t.create.width>0&&e.integer(t.create.height)&&t.create.height>0&&e.integer(t.create.channels)){if(s.createWidth=t.create.width,s.createHeight=t.create.height,s.createChannels=t.create.channels,e.defined(t.create.noise)){if(!e.object(t.create.noise))throw new Error("Expected noise to be an object");if(!e.inArray(t.create.noise.type,["gaussian"]))throw new Error("Only gaussian noise is supported at the moment");if(!e.inRange(t.create.channels,1,4))throw e.invalidParameterError("create.channels","number between 1 and 4",t.create.channels);if(s.createNoiseType=t.create.noise.type,e.number(t.create.noise.mean)&&e.inRange(t.create.noise.mean,0,1e4))s.createNoiseMean=t.create.noise.mean;else throw e.invalidParameterError("create.noise.mean","number between 0 and 10000",t.create.noise.mean);if(e.number(t.create.noise.sigma)&&e.inRange(t.create.noise.sigma,0,1e4))s.createNoiseSigma=t.create.noise.sigma;else throw e.invalidParameterError("create.noise.sigma","number between 0 and 10000",t.create.noise.sigma)}else if(e.defined(t.create.background)){if(!e.inRange(t.create.channels,3,4))throw e.invalidParameterError("create.channels","number between 3 and 4",t.create.channels);const b=h(t.create.background);s.createBackground=[b.red(),b.green(),b.blue(),Math.round(b.alpha()*255)]}else throw new Error("Expected valid noise or background to create a new input image");delete s.buffer}else throw new Error("Expected valid width, height and channels to create a new input image");if(e.defined(t.text))if(e.object(t.text)&&e.string(t.text.text)){if(s.textValue=t.text.text,e.defined(t.text.height)&&e.defined(t.text.dpi))throw new Error("Expected only one of dpi or height");if(e.defined(t.text.font))if(e.string(t.text.font))s.textFont=t.text.font;else throw e.invalidParameterError("text.font","string",t.text.font);if(e.defined(t.text.fontfile))if(e.string(t.text.fontfile))s.textFontfile=t.text.fontfile;else throw e.invalidParameterError("text.fontfile","string",t.text.fontfile);if(e.defined(t.text.width))if(e.integer(t.text.width)&&t.text.width>0)s.textWidth=t.text.width;else throw e.invalidParameterError("text.width","positive integer",t.text.width);if(e.defined(t.text.height))if(e.integer(t.text.height)&&t.text.height>0)s.textHeight=t.text.height;else throw e.invalidParameterError("text.height","positive integer",t.text.height);if(e.defined(t.text.align))if(e.string(t.text.align)&&e.string(this.constructor.align[t.text.align]))s.textAlign=this.constructor.align[t.text.align];else throw e.invalidParameterError("text.align","valid alignment",t.text.align);if(e.defined(t.text.justify))if(e.bool(t.text.justify))s.textJustify=t.text.justify;else throw e.invalidParameterError("text.justify","boolean",t.text.justify);if(e.defined(t.text.dpi))if(e.integer(t.text.dpi)&&e.inRange(t.text.dpi,1,1e6))s.textDpi=t.text.dpi;else throw e.invalidParameterError("text.dpi","integer between 1 and 1000000",t.text.dpi);if(e.defined(t.text.rgba))if(e.bool(t.text.rgba))s.textRgba=t.text.rgba;else throw e.invalidParameterError("text.rgba","bool",t.text.rgba);if(e.defined(t.text.spacing))if(e.integer(t.text.spacing)&&e.inRange(t.text.spacing,-1e6,1e6))s.textSpacing=t.text.spacing;else throw e.invalidParameterError("text.spacing","integer between -1000000 and 1000000",t.text.spacing);if(e.defined(t.text.wrap))if(e.string(t.text.wrap)&&e.inArray(t.text.wrap,["word","char","word-char","none"]))s.textWrap=t.text.wrap;else throw e.invalidParameterError("text.wrap","one of: word, char, word-char, none",t.text.wrap);delete s.buffer}else throw new Error("Expected a valid string to create an image with text.")}else if(e.defined(t))throw new Error("Invalid input options "+t);return s}function o(u,t,d){Array.isArray(this.options.input.buffer)?e.buffer(u)?(this.options.input.buffer.length===0&&this.on("finish",()=>{this.streamInFinished=!0}),this.options.input.buffer.push(u),d()):d(new Error("Non-Buffer data on Writable Stream")):d(new Error("Unexpected data on Writable Stream"))}function l(){this._isStreamInput()&&(this.options.input.buffer=Buffer.concat(this.options.input.buffer))}function i(){return Array.isArray(this.options.input.buffer)}function n(u){const t=Error();return e.fn(u)?(this._isStreamInput()?this.on("finish",()=>{this._flattenBufferIn(),g.metadata(this.options,(d,s)=>{d?u(e.nativeError(d,t)):u(null,s)})}):g.metadata(this.options,(d,s)=>{d?u(e.nativeError(d,t)):u(null,s)}),this):this._isStreamInput()?new Promise((d,s)=>{const b=()=>{this._flattenBufferIn(),g.metadata(this.options,(p,E)=>{p?s(e.nativeError(p,t)):d(E)})};this.writableFinished?b():this.once("finish",b)}):new Promise((d,s)=>{g.metadata(this.options,(b,p)=>{b?s(e.nativeError(b,t)):d(p)})})}function f(u){const t=Error();return e.fn(u)?(this._isStreamInput()?this.on("finish",()=>{this._flattenBufferIn(),g.stats(this.options,(d,s)=>{d?u(e.nativeError(d,t)):u(null,s)})}):g.stats(this.options,(d,s)=>{d?u(e.nativeError(d,t)):u(null,s)}),this):this._isStreamInput()?new Promise((d,s)=>{this.on("finish",function(){this._flattenBufferIn(),g.stats(this.options,(b,p)=>{b?s(e.nativeError(b,t)):d(p)})})}):new Promise((d,s)=>{g.stats(this.options,(b,p)=>{b?s(e.nativeError(b,t)):d(p)})})}return Ne=function(u){Object.assign(u.prototype,{_inputOptionsFromObject:a,_createInputDescriptor:c,_write:o,_flattenBufferIn:l,_isStreamInput:i,metadata:n,stats:f}),u.align=w},Ne}var Ce,$r;function _t(){if($r)return Ce;$r=1;const h=z(),e={center:0,centre:0,north:1,east:2,south:3,west:4,northeast:5,southeast:6,southwest:7,northwest:8},g={top:1,right:2,bottom:3,left:4,"right top":5,"right bottom":6,"left bottom":7,"left top":8},w={background:"background",copy:"copy",repeat:"repeat",mirror:"mirror"},a={entropy:16,attention:17},c={nearest:"nearest",linear:"linear",cubic:"cubic",mitchell:"mitchell",lanczos2:"lanczos2",lanczos3:"lanczos3"},o={contain:"contain",cover:"cover",fill:"fill",inside:"inside",outside:"outside"},l={contain:"embed",cover:"crop",fill:"ignore_aspect",inside:"max",outside:"min"};function i(s){return s.angle%360!==0||s.useExifOrientation===!0||s.rotationAngle!==0}function n(s){return s.width!==-1||s.height!==-1}function f(s,b,p){if(n(this.options)&&this.options.debuglog("ignoring previous resize options"),this.options.widthPost!==-1&&this.options.debuglog("operation order will be: extract, resize, extract"),h.defined(s))if(h.object(s)&&!h.defined(p))p=s;else if(h.integer(s)&&s>0)this.options.width=s;else throw h.invalidParameterError("width","positive integer",s);else this.options.width=-1;if(h.defined(b))if(h.integer(b)&&b>0)this.options.height=b;else throw h.invalidParameterError("height","positive integer",b);else this.options.height=-1;if(h.object(p)){if(h.defined(p.width))if(h.integer(p.width)&&p.width>0)this.options.width=p.width;else throw h.invalidParameterError("width","positive integer",p.width);if(h.defined(p.height))if(h.integer(p.height)&&p.height>0)this.options.height=p.height;else throw h.invalidParameterError("height","positive integer",p.height);if(h.defined(p.fit)){const E=l[p.fit];if(h.string(E))this.options.canvas=E;else throw h.invalidParameterError("fit","valid fit",p.fit)}if(h.defined(p.position)){const E=h.integer(p.position)?p.position:a[p.position]||g[p.position]||e[p.position];if(h.integer(E)&&(h.inRange(E,0,8)||h.inRange(E,16,17)))this.options.position=E;else throw h.invalidParameterError("position","valid position/gravity/strategy",p.position)}if(this._setBackgroundColourOption("resizeBackground",p.background),h.defined(p.kernel))if(h.string(c[p.kernel]))this.options.kernel=c[p.kernel];else throw h.invalidParameterError("kernel","valid kernel name",p.kernel);h.defined(p.withoutEnlargement)&&this._setBooleanOption("withoutEnlargement",p.withoutEnlargement),h.defined(p.withoutReduction)&&this._setBooleanOption("withoutReduction",p.withoutReduction),h.defined(p.fastShrinkOnLoad)&&this._setBooleanOption("fastShrinkOnLoad",p.fastShrinkOnLoad)}return i(this.options)&&n(this.options)&&(this.options.rotateBeforePreExtract=!0),this}function u(s){if(h.integer(s)&&s>0)this.options.extendTop=s,this.options.extendBottom=s,this.options.extendLeft=s,this.options.extendRight=s;else if(h.object(s)){if(h.defined(s.top))if(h.integer(s.top)&&s.top>=0)this.options.extendTop=s.top;else throw h.invalidParameterError("top","positive integer",s.top);if(h.defined(s.bottom))if(h.integer(s.bottom)&&s.bottom>=0)this.options.extendBottom=s.bottom;else throw h.invalidParameterError("bottom","positive integer",s.bottom);if(h.defined(s.left))if(h.integer(s.left)&&s.left>=0)this.options.extendLeft=s.left;else throw h.invalidParameterError("left","positive integer",s.left);if(h.defined(s.right))if(h.integer(s.right)&&s.right>=0)this.options.extendRight=s.right;else throw h.invalidParameterError("right","positive integer",s.right);if(this._setBackgroundColourOption("extendBackground",s.background),h.defined(s.extendWith))if(h.string(w[s.extendWith]))this.options.extendWith=w[s.extendWith];else throw h.invalidParameterError("extendWith","one of: background, copy, repeat, mirror",s.extendWith)}else throw h.invalidParameterError("extend","integer or object",s);return this}function t(s){const b=n(this.options)||this.options.widthPre!==-1?"Post":"Pre";return this.options[`width${b}`]!==-1&&this.options.debuglog("ignoring previous extract options"),["left","top","width","height"].forEach(function(p){const E=s[p];if(h.integer(E)&&E>=0)this.options[p+(p==="left"||p==="top"?"Offset":"")+b]=E;else throw h.invalidParameterError(p,"integer",E)},this),i(this.options)&&!n(this.options)&&(this.options.widthPre===-1||this.options.widthPost===-1)&&(this.options.rotateBeforePreExtract=!0),this}function d(s){if(this.options.trimThreshold=10,h.defined(s))if(h.object(s)){if(h.defined(s.background)&&this._setBackgroundColourOption("trimBackground",s.background),h.defined(s.threshold))if(h.number(s.threshold)&&s.threshold>=0)this.options.trimThreshold=s.threshold;else throw h.invalidParameterError("threshold","positive number",s.threshold);h.defined(s.lineArt)&&this._setBooleanOption("trimLineArt",s.lineArt)}else throw h.invalidParameterError("trim","object",s);return i(this.options)&&(this.options.rotateBeforePreExtract=!0),this}return Ce=function(s){Object.assign(s.prototype,{resize:f,extend:u,extract:t,trim:d}),s.gravity=e,s.strategy=a,s.kernel=c,s.fit=o,s.position=g},Ce}var qe,Lr;function Tt(){if(Lr)return qe;Lr=1;const h=z(),e={clear:"clear",source:"source",over:"over",in:"in",out:"out",atop:"atop",dest:"dest","dest-over":"dest-over","dest-in":"dest-in","dest-out":"dest-out","dest-atop":"dest-atop",xor:"xor",add:"add",saturate:"saturate",multiply:"multiply",screen:"screen",overlay:"overlay",darken:"darken",lighten:"lighten","colour-dodge":"colour-dodge","color-dodge":"colour-dodge","colour-burn":"colour-burn","color-burn":"colour-burn","hard-light":"hard-light","soft-light":"soft-light",difference:"difference",exclusion:"exclusion"};function g(w){if(!Array.isArray(w))throw h.invalidParameterError("images to composite","array",w);return this.options.composite=w.map(a=>{if(!h.object(a))throw h.invalidParameterError("image to composite","object",a);const c=this._inputOptionsFromObject(a),o={input:this._createInputDescriptor(a.input,c,{allowStream:!1}),blend:"over",tile:!1,left:0,top:0,hasOffset:!1,gravity:0,premultiplied:!1};if(h.defined(a.blend))if(h.string(e[a.blend]))o.blend=e[a.blend];else throw h.invalidParameterError("blend","valid blend name",a.blend);if(h.defined(a.tile))if(h.bool(a.tile))o.tile=a.tile;else throw h.invalidParameterError("tile","boolean",a.tile);if(h.defined(a.left))if(h.integer(a.left))o.left=a.left;else throw h.invalidParameterError("left","integer",a.left);if(h.defined(a.top))if(h.integer(a.top))o.top=a.top;else throw h.invalidParameterError("top","integer",a.top);if(h.defined(a.top)!==h.defined(a.left))throw new Error("Expected both left and top to be set");if(o.hasOffset=h.integer(a.top)&&h.integer(a.left),h.defined(a.gravity))if(h.integer(a.gravity)&&h.inRange(a.gravity,0,8))o.gravity=a.gravity;else if(h.string(a.gravity)&&h.integer(this.constructor.gravity[a.gravity]))o.gravity=this.constructor.gravity[a.gravity];else throw h.invalidParameterError("gravity","valid gravity",a.gravity);if(h.defined(a.premultiplied))if(h.bool(a.premultiplied))o.premultiplied=a.premultiplied;else throw h.invalidParameterError("premultiplied","boolean",a.premultiplied);return o}),this}return qe=function(w){w.prototype.composite=g,w.blend=e},qe}var Oe,jr;function Mt(){if(jr)return Oe;jr=1;const h=Ue(),e=z(),g={integer:"integer",float:"float",approximate:"approximate"};function w(m,x){if((this.options.useExifOrientation||this.options.angle||this.options.rotationAngle)&&this.options.debuglog("ignoring previous rotate options"),!e.defined(m))this.options.useExifOrientation=!0;else if(e.integer(m)&&!(m%90))this.options.angle=m;else if(e.number(m)){if(this.options.rotationAngle=m,e.object(x)&&x.background){const N=h(x.background);this.options.rotationBackground=[N.red(),N.green(),N.blue(),Math.round(N.alpha()*255)]}}else throw e.invalidParameterError("angle","numeric",m);return this}function a(m){return this.options.flip=e.bool(m)?m:!0,this}function c(m){return this.options.flop=e.bool(m)?m:!0,this}function o(m,x){const N=[].concat(...m);if(N.length===4&&N.every(e.number))this.options.affineMatrix=N;else throw e.invalidParameterError("matrix","1x4 or 2x2 array",m);if(e.defined(x))if(e.object(x)){if(this._setBackgroundColourOption("affineBackground",x.background),e.defined(x.idx))if(e.number(x.idx))this.options.affineIdx=x.idx;else throw e.invalidParameterError("options.idx","number",x.idx);if(e.defined(x.idy))if(e.number(x.idy))this.options.affineIdy=x.idy;else throw e.invalidParameterError("options.idy","number",x.idy);if(e.defined(x.odx))if(e.number(x.odx))this.options.affineOdx=x.odx;else throw e.invalidParameterError("options.odx","number",x.odx);if(e.defined(x.ody))if(e.number(x.ody))this.options.affineOdy=x.ody;else throw e.invalidParameterError("options.ody","number",x.ody);if(e.defined(x.interpolator))if(e.inArray(x.interpolator,Object.values(this.constructor.interpolators)))this.options.affineInterpolator=x.interpolator;else throw e.invalidParameterError("options.interpolator","valid interpolator name",x.interpolator)}else throw e.invalidParameterError("options","object",x);return this}function l(m,x,N){if(!e.defined(m))this.options.sharpenSigma=-1;else if(e.bool(m))this.options.sharpenSigma=m?-1:0;else if(e.number(m)&&e.inRange(m,.01,1e4)){if(this.options.sharpenSigma=m,e.defined(x))if(e.number(x)&&e.inRange(x,0,1e4))this.options.sharpenM1=x;else throw e.invalidParameterError("flat","number between 0 and 10000",x);if(e.defined(N))if(e.number(N)&&e.inRange(N,0,1e4))this.options.sharpenM2=N;else throw e.invalidParameterError("jagged","number between 0 and 10000",N)}else if(e.plainObject(m)){if(e.number(m.sigma)&&e.inRange(m.sigma,1e-6,10))this.options.sharpenSigma=m.sigma;else throw e.invalidParameterError("options.sigma","number between 0.000001 and 10",m.sigma);if(e.defined(m.m1))if(e.number(m.m1)&&e.inRange(m.m1,0,1e6))this.options.sharpenM1=m.m1;else throw e.invalidParameterError("options.m1","number between 0 and 1000000",m.m1);if(e.defined(m.m2))if(e.number(m.m2)&&e.inRange(m.m2,0,1e6))this.options.sharpenM2=m.m2;else throw e.invalidParameterError("options.m2","number between 0 and 1000000",m.m2);if(e.defined(m.x1))if(e.number(m.x1)&&e.inRange(m.x1,0,1e6))this.options.sharpenX1=m.x1;else throw e.invalidParameterError("options.x1","number between 0 and 1000000",m.x1);if(e.defined(m.y2))if(e.number(m.y2)&&e.inRange(m.y2,0,1e6))this.options.sharpenY2=m.y2;else throw e.invalidParameterError("options.y2","number between 0 and 1000000",m.y2);if(e.defined(m.y3))if(e.number(m.y3)&&e.inRange(m.y3,0,1e6))this.options.sharpenY3=m.y3;else throw e.invalidParameterError("options.y3","number between 0 and 1000000",m.y3)}else throw e.invalidParameterError("sigma","number between 0.01 and 10000",m);return this}function i(m){if(!e.defined(m))this.options.medianSize=3;else if(e.integer(m)&&e.inRange(m,1,1e3))this.options.medianSize=m;else throw e.invalidParameterError("size","integer between 1 and 1000",m);return this}function n(m){let x;if(e.number(m))x=m;else if(e.plainObject(m)){if(!e.number(m.sigma))throw e.invalidParameterError("options.sigma","number between 0.3 and 1000",x);if(x=m.sigma,"precision"in m)if(e.string(g[m.precision]))this.options.precision=g[m.precision];else throw e.invalidParameterError("precision","one of: integer, float, approximate",m.precision);if("minAmplitude"in m)if(e.number(m.minAmplitude)&&e.inRange(m.minAmplitude,.001,1))this.options.minAmpl=m.minAmplitude;else throw e.invalidParameterError("minAmplitude","number between 0.001 and 1",m.minAmplitude)}if(!e.defined(m))this.options.blurSigma=-1;else if(e.bool(m))this.options.blurSigma=m?-1:0;else if(e.number(x)&&e.inRange(x,.3,1e3))this.options.blurSigma=x;else throw e.invalidParameterError("sigma","number between 0.3 and 1000",x);return this}function f(m){return this.options.flatten=e.bool(m)?m:!0,e.object(m)&&this._setBackgroundColourOption("flattenBackground",m.background),this}function u(){return this.options.unflatten=!0,this}function t(m,x){if(!e.defined(m))this.options.gamma=2.2;else if(e.number(m)&&e.inRange(m,1,3))this.options.gamma=m;else throw e.invalidParameterError("gamma","number between 1.0 and 3.0",m);if(!e.defined(x))this.options.gammaOut=this.options.gamma;else if(e.number(x)&&e.inRange(x,1,3))this.options.gammaOut=x;else throw e.invalidParameterError("gammaOut","number between 1.0 and 3.0",x);return this}function d(m){if(this.options.negate=e.bool(m)?m:!0,e.plainObject(m)&&"alpha"in m)if(e.bool(m.alpha))this.options.negateAlpha=m.alpha;else throw e.invalidParameterError("alpha","should be boolean value",m.alpha);return this}function s(m){if(e.plainObject(m)){if(e.defined(m.lower))if(e.number(m.lower)&&e.inRange(m.lower,0,99))this.options.normaliseLower=m.lower;else throw e.invalidParameterError("lower","number between 0 and 99",m.lower);if(e.defined(m.upper))if(e.number(m.upper)&&e.inRange(m.upper,1,100))this.options.normaliseUpper=m.upper;else throw e.invalidParameterError("upper","number between 1 and 100",m.upper)}if(this.options.normaliseLower>=this.options.normaliseUpper)throw e.invalidParameterError("range","lower to be less than upper",`${this.options.normaliseLower} >= ${this.options.normaliseUpper}`);return this.options.normalise=!0,this}function b(m){return this.normalise(m)}function p(m){if(e.plainObject(m)){if(e.integer(m.width)&&m.width>0)this.options.claheWidth=m.width;else throw e.invalidParameterError("width","integer greater than zero",m.width);if(e.integer(m.height)&&m.height>0)this.options.claheHeight=m.height;else throw e.invalidParameterError("height","integer greater than zero",m.height);if(e.defined(m.maxSlope))if(e.integer(m.maxSlope)&&e.inRange(m.maxSlope,0,100))this.options.claheMaxSlope=m.maxSlope;else throw e.invalidParameterError("maxSlope","integer between 0 and 100",m.maxSlope)}else throw e.invalidParameterError("options","plain object",m);return this}function E(m){if(!e.object(m)||!Array.isArray(m.kernel)||!e.integer(m.width)||!e.integer(m.height)||!e.inRange(m.width,3,1001)||!e.inRange(m.height,3,1001)||m.height*m.width!==m.kernel.length)throw new Error("Invalid convolution kernel");return e.integer(m.scale)||(m.scale=m.kernel.reduce(function(x,N){return x+N},0)),m.scale<1&&(m.scale=1),e.integer(m.offset)||(m.offset=0),this.options.convKernel=m,this}function k(m,x){if(!e.defined(m))this.options.threshold=128;else if(e.bool(m))this.options.threshold=m?128:0;else if(e.integer(m)&&e.inRange(m,0,255))this.options.threshold=m;else throw e.invalidParameterError("threshold","integer between 0 and 255",m);return!e.object(x)||x.greyscale===!0||x.grayscale===!0?this.options.thresholdGrayscale=!0:this.options.thresholdGrayscale=!1,this}function j(m,x,N){if(this.options.boolean=this._createInputDescriptor(m,N),e.string(x)&&e.inArray(x,["and","or","eor"]))this.options.booleanOp=x;else throw e.invalidParameterError("operator","one of: and, or, eor",x);return this}function O(m,x){if(!e.defined(m)&&e.number(x)?m=1:e.number(m)&&!e.defined(x)&&(x=0),!e.defined(m))this.options.linearA=[];else if(e.number(m))this.options.linearA=[m];else if(Array.isArray(m)&&m.length&&m.every(e.number))this.options.linearA=m;else throw e.invalidParameterError("a","number or array of numbers",m);if(!e.defined(x))this.options.linearB=[];else if(e.number(x))this.options.linearB=[x];else if(Array.isArray(x)&&x.length&&x.every(e.number))this.options.linearB=x;else throw e.invalidParameterError("b","number or array of numbers",x);if(this.options.linearA.length!==this.options.linearB.length)throw new Error("Expected a and b to be arrays of the same length");return this}function _(m){if(!Array.isArray(m))throw e.invalidParameterError("inputMatrix","array",m);if(m.length!==3&&m.length!==4)throw e.invalidParameterError("inputMatrix","3x3 or 4x4 array",m.length);const x=m.flat().map(Number);if(x.length!==9&&x.length!==16)throw e.invalidParameterError("inputMatrix","cardinality of 9 or 16",x.length);return this.options.recombMatrix=x,this}function F(m){if(!e.plainObject(m))throw e.invalidParameterError("options","plain object",m);if("brightness"in m)if(e.number(m.brightness)&&m.brightness>=0)this.options.brightness=m.brightness;else throw e.invalidParameterError("brightness","number above zero",m.brightness);if("saturation"in m)if(e.number(m.saturation)&&m.saturation>=0)this.options.saturation=m.saturation;else throw e.invalidParameterError("saturation","number above zero",m.saturation);if("hue"in m)if(e.integer(m.hue))this.options.hue=m.hue%360;else throw e.invalidParameterError("hue","number",m.hue);if("lightness"in m)if(e.number(m.lightness))this.options.lightness=m.lightness;else throw e.invalidParameterError("lightness","number",m.lightness);return this}return Oe=function(m){Object.assign(m.prototype,{rotate:w,flip:a,flop:c,affine:o,sharpen:l,median:i,blur:n,flatten:f,unflatten:u,gamma:t,negate:d,normalise:s,normalize:b,clahe:p,convolve:E,threshold:k,boolean:j,linear:O,recomb:_,modulate:F})},Oe}var Fe,Sr;function Bt(){if(Sr)return Fe;Sr=1;const h=Ue(),e=z(),g={multiband:"multiband","b-w":"b-w",bw:"b-w",cmyk:"cmyk",srgb:"srgb"};function w(u){return this._setBackgroundColourOption("tint",u),this}function a(u){return this.options.greyscale=e.bool(u)?u:!0,this}function c(u){return this.greyscale(u)}function o(u){if(!e.string(u))throw e.invalidParameterError("colourspace","string",u);return this.options.colourspacePipeline=u,this}function l(u){return this.pipelineColourspace(u)}function i(u){if(!e.string(u))throw e.invalidParameterError("colourspace","string",u);return this.options.colourspace=u,this}function n(u){return this.toColourspace(u)}function f(u,t){if(e.defined(t))if(e.object(t)||e.string(t)){const d=h(t);this.options[u]=[d.red(),d.green(),d.blue(),Math.round(d.alpha()*255)]}else throw e.invalidParameterError("background","object or string",t)}return Fe=function(u){Object.assign(u.prototype,{tint:w,greyscale:a,grayscale:c,pipelineColourspace:o,pipelineColorspace:l,toColourspace:i,toColorspace:n,_setBackgroundColourOption:f}),u.colourspace=g,u.colorspace=g},Fe}var _e,kr;function Dt(){if(kr)return _e;kr=1;const h=z(),e={and:"and",or:"or",eor:"eor"};function g(){return this.options.removeAlpha=!0,this}function w(l){if(h.defined(l))if(h.number(l)&&h.inRange(l,0,1))this.options.ensureAlpha=l;else throw h.invalidParameterError("alpha","number between 0 and 1",l);else this.options.ensureAlpha=1;return this}function a(l){const i={red:0,green:1,blue:2,alpha:3};if(Object.keys(i).includes(l)&&(l=i[l]),h.integer(l)&&h.inRange(l,0,4))this.options.extractChannel=l;else throw h.invalidParameterError("channel","integer or one of: red, green, blue, alpha",l);return this}function c(l,i){return Array.isArray(l)?l.forEach(function(n){this.options.joinChannelIn.push(this._createInputDescriptor(n,i))},this):this.options.joinChannelIn.push(this._createInputDescriptor(l,i)),this}function o(l){if(h.string(l)&&h.inArray(l,["and","or","eor"]))this.options.bandBoolOp=l;else throw h.invalidParameterError("boolOp","one of: and, or, eor",l);return this}return _e=function(l){Object.assign(l.prototype,{removeAlpha:g,ensureAlpha:w,extractChannel:a,joinChannel:c,bandbool:o}),l.bool=e},_e}var Te,Nr;function zt(){if(Nr)return Te;Nr=1;const h=D,e=z(),g=K(),w=new Map([["heic","heif"],["heif","heif"],["avif","avif"],["jpeg","jpeg"],["jpg","jpeg"],["jpe","jpeg"],["tile","tile"],["dz","tile"],["png","png"],["raw","raw"],["tiff","tiff"],["tif","tiff"],["webp","webp"],["gif","gif"],["jp2","jp2"],["jpx","jp2"],["j2k","jp2"],["j2c","jp2"],["jxl","jxl"]]),a=/\.(jp[2x]|j2[kc])$/i,c=()=>new Error("JP2 output requires libvips with support for OpenJPEG"),o=r=>1<<31-Math.clz32(Math.ceil(Math.log2(r)));function l(r,y){let I;if(e.string(r)?e.string(this.options.input.file)&&h.resolve(this.options.input.file)===h.resolve(r)?I=new Error("Cannot use same file for input and output"):a.test(h.extname(r))&&!this.constructor.format.jp2k.output.file&&(I=c()):I=new Error("Missing output file path"),I)if(e.fn(y))y(I);else return Promise.reject(I);else{this.options.fileOut=r;const L=Error();return this._pipeline(y,L)}return this}function i(r,y){e.object(r)?this._setBooleanOption("resolveWithObject",r.resolveWithObject):this.options.resolveWithObject&&(this.options.resolveWithObject=!1),this.options.fileOut="";const I=Error();return this._pipeline(e.fn(r)?r:y,I)}function n(){return this.options.keepMetadata|=1,this}function f(r){if(e.object(r))for(const[y,I]of Object.entries(r))if(e.object(I))for(const[L,$]of Object.entries(I))if(e.string($))this.options.withExif[`exif-${y.toLowerCase()}-${L}`]=$;else throw e.invalidParameterError(`${y}.${L}`,"string",$);else throw e.invalidParameterError(y,"object",I);else throw e.invalidParameterError("exif","object",r);return this.options.withExifMerge=!1,this.keepExif()}function u(r){return this.withExif(r),this.options.withExifMerge=!0,this}function t(){return this.options.keepMetadata|=8,this}function d(r,y){if(e.string(r))this.options.withIccProfile=r;else throw e.invalidParameterError("icc","string",r);if(this.keepIccProfile(),e.object(y)&&e.defined(y.attach))if(e.bool(y.attach))y.attach||(this.options.keepMetadata&=-9);else throw e.invalidParameterError("attach","boolean",y.attach);return this}function s(){return this.options.keepMetadata=31,this}function b(r){if(this.keepMetadata(),this.withIccProfile("srgb"),e.object(r)){if(e.defined(r.orientation))if(e.integer(r.orientation)&&e.inRange(r.orientation,1,8))this.options.withMetadataOrientation=r.orientation;else throw e.invalidParameterError("orientation","integer between 1 and 8",r.orientation);if(e.defined(r.density))if(e.number(r.density)&&r.density>0)this.options.withMetadataDensity=r.density;else throw e.invalidParameterError("density","positive number",r.density);e.defined(r.icc)&&this.withIccProfile(r.icc),e.defined(r.exif)&&this.withExifMerge(r.exif)}return this}function p(r,y){const I=w.get((e.object(r)&&e.string(r.id)?r.id:r).toLowerCase());if(!I)throw e.invalidParameterError("format",`one of: ${[...w.keys()].join(", ")}`,r);return this[I](y)}function E(r){if(e.object(r)){if(e.defined(r.quality))if(e.integer(r.quality)&&e.inRange(r.quality,1,100))this.options.jpegQuality=r.quality;else throw e.invalidParameterError("quality","integer between 1 and 100",r.quality);if(e.defined(r.progressive)&&this._setBooleanOption("jpegProgressive",r.progressive),e.defined(r.chromaSubsampling))if(e.string(r.chromaSubsampling)&&e.inArray(r.chromaSubsampling,["4:2:0","4:4:4"]))this.options.jpegChromaSubsampling=r.chromaSubsampling;else throw e.invalidParameterError("chromaSubsampling","one of: 4:2:0, 4:4:4",r.chromaSubsampling);const y=e.bool(r.optimizeCoding)?r.optimizeCoding:r.optimiseCoding;if(e.defined(y)&&this._setBooleanOption("jpegOptimiseCoding",y),e.defined(r.mozjpeg))if(e.bool(r.mozjpeg))r.mozjpeg&&(this.options.jpegTrellisQuantisation=!0,this.options.jpegOvershootDeringing=!0,this.options.jpegOptimiseScans=!0,this.options.jpegProgressive=!0,this.options.jpegQuantisationTable=3);else throw e.invalidParameterError("mozjpeg","boolean",r.mozjpeg);const I=e.bool(r.trellisQuantization)?r.trellisQuantization:r.trellisQuantisation;e.defined(I)&&this._setBooleanOption("jpegTrellisQuantisation",I),e.defined(r.overshootDeringing)&&this._setBooleanOption("jpegOvershootDeringing",r.overshootDeringing);const L=e.bool(r.optimizeScans)?r.optimizeScans:r.optimiseScans;e.defined(L)&&(this._setBooleanOption("jpegOptimiseScans",L),L&&(this.options.jpegProgressive=!0));const $=e.number(r.quantizationTable)?r.quantizationTable:r.quantisationTable;if(e.defined($))if(e.integer($)&&e.inRange($,0,8))this.options.jpegQuantisationTable=$;else throw e.invalidParameterError("quantisationTable","integer between 0 and 8",$)}return this._updateFormatOut("jpeg",r)}function k(r){if(e.object(r)){if(e.defined(r.progressive)&&this._setBooleanOption("pngProgressive",r.progressive),e.defined(r.compressionLevel))if(e.integer(r.compressionLevel)&&e.inRange(r.compressionLevel,0,9))this.options.pngCompressionLevel=r.compressionLevel;else throw e.invalidParameterError("compressionLevel","integer between 0 and 9",r.compressionLevel);e.defined(r.adaptiveFiltering)&&this._setBooleanOption("pngAdaptiveFiltering",r.adaptiveFiltering);const y=r.colours||r.colors;if(e.defined(y))if(e.integer(y)&&e.inRange(y,2,256))this.options.pngBitdepth=o(y);else throw e.invalidParameterError("colours","integer between 2 and 256",y);if(e.defined(r.palette)?this._setBooleanOption("pngPalette",r.palette):[r.quality,r.effort,r.colours,r.colors,r.dither].some(e.defined)&&this._setBooleanOption("pngPalette",!0),this.options.pngPalette){if(e.defined(r.quality))if(e.integer(r.quality)&&e.inRange(r.quality,0,100))this.options.pngQuality=r.quality;else throw e.invalidParameterError("quality","integer between 0 and 100",r.quality);if(e.defined(r.effort))if(e.integer(r.effort)&&e.inRange(r.effort,1,10))this.options.pngEffort=r.effort;else throw e.invalidParameterError("effort","integer between 1 and 10",r.effort);if(e.defined(r.dither))if(e.number(r.dither)&&e.inRange(r.dither,0,1))this.options.pngDither=r.dither;else throw e.invalidParameterError("dither","number between 0.0 and 1.0",r.dither)}}return this._updateFormatOut("png",r)}function j(r){if(e.object(r)){if(e.defined(r.quality))if(e.integer(r.quality)&&e.inRange(r.quality,1,100))this.options.webpQuality=r.quality;else throw e.invalidParameterError("quality","integer between 1 and 100",r.quality);if(e.defined(r.alphaQuality))if(e.integer(r.alphaQuality)&&e.inRange(r.alphaQuality,0,100))this.options.webpAlphaQuality=r.alphaQuality;else throw e.invalidParameterError("alphaQuality","integer between 0 and 100",r.alphaQuality);if(e.defined(r.lossless)&&this._setBooleanOption("webpLossless",r.lossless),e.defined(r.nearLossless)&&this._setBooleanOption("webpNearLossless",r.nearLossless),e.defined(r.smartSubsample)&&this._setBooleanOption("webpSmartSubsample",r.smartSubsample),e.defined(r.preset))if(e.string(r.preset)&&e.inArray(r.preset,["default","photo","picture","drawing","icon","text"]))this.options.webpPreset=r.preset;else throw e.invalidParameterError("preset","one of: default, photo, picture, drawing, icon, text",r.preset);if(e.defined(r.effort))if(e.integer(r.effort)&&e.inRange(r.effort,0,6))this.options.webpEffort=r.effort;else throw e.invalidParameterError("effort","integer between 0 and 6",r.effort);e.defined(r.minSize)&&this._setBooleanOption("webpMinSize",r.minSize),e.defined(r.mixed)&&this._setBooleanOption("webpMixed",r.mixed)}return F(r,this.options),this._updateFormatOut("webp",r)}function O(r){if(e.object(r)){e.defined(r.reuse)&&this._setBooleanOption("gifReuse",r.reuse),e.defined(r.progressive)&&this._setBooleanOption("gifProgressive",r.progressive);const y=r.colours||r.colors;if(e.defined(y))if(e.integer(y)&&e.inRange(y,2,256))this.options.gifBitdepth=o(y);else throw e.invalidParameterError("colours","integer between 2 and 256",y);if(e.defined(r.effort))if(e.number(r.effort)&&e.inRange(r.effort,1,10))this.options.gifEffort=r.effort;else throw e.invalidParameterError("effort","integer between 1 and 10",r.effort);if(e.defined(r.dither))if(e.number(r.dither)&&e.inRange(r.dither,0,1))this.options.gifDither=r.dither;else throw e.invalidParameterError("dither","number between 0.0 and 1.0",r.dither);if(e.defined(r.interFrameMaxError))if(e.number(r.interFrameMaxError)&&e.inRange(r.interFrameMaxError,0,32))this.options.gifInterFrameMaxError=r.interFrameMaxError;else throw e.invalidParameterError("interFrameMaxError","number between 0.0 and 32.0",r.interFrameMaxError);if(e.defined(r.interPaletteMaxError))if(e.number(r.interPaletteMaxError)&&e.inRange(r.interPaletteMaxError,0,256))this.options.gifInterPaletteMaxError=r.interPaletteMaxError;else throw e.invalidParameterError("interPaletteMaxError","number between 0.0 and 256.0",r.interPaletteMaxError)}return F(r,this.options),this._updateFormatOut("gif",r)}function _(r){if(!this.constructor.format.jp2k.output.buffer)throw c();if(e.object(r)){if(e.defined(r.quality))if(e.integer(r.quality)&&e.inRange(r.quality,1,100))this.options.jp2Quality=r.quality;else throw e.invalidParameterError("quality","integer between 1 and 100",r.quality);if(e.defined(r.lossless))if(e.bool(r.lossless))this.options.jp2Lossless=r.lossless;else throw e.invalidParameterError("lossless","boolean",r.lossless);if(e.defined(r.tileWidth))if(e.integer(r.tileWidth)&&e.inRange(r.tileWidth,1,32768))this.options.jp2TileWidth=r.tileWidth;else throw e.invalidParameterError("tileWidth","integer between 1 and 32768",r.tileWidth);if(e.defined(r.tileHeight))if(e.integer(r.tileHeight)&&e.inRange(r.tileHeight,1,32768))this.options.jp2TileHeight=r.tileHeight;else throw e.invalidParameterError("tileHeight","integer between 1 and 32768",r.tileHeight);if(e.defined(r.chromaSubsampling))if(e.string(r.chromaSubsampling)&&e.inArray(r.chromaSubsampling,["4:2:0","4:4:4"]))this.options.jp2ChromaSubsampling=r.chromaSubsampling;else throw e.invalidParameterError("chromaSubsampling","one of: 4:2:0, 4:4:4",r.chromaSubsampling)}return this._updateFormatOut("jp2",r)}function F(r,y){if(e.object(r)&&e.defined(r.loop))if(e.integer(r.loop)&&e.inRange(r.loop,0,65535))y.loop=r.loop;else throw e.invalidParameterError("loop","integer between 0 and 65535",r.loop);if(e.object(r)&&e.defined(r.delay))if(e.integer(r.delay)&&e.inRange(r.delay,0,65535))y.delay=[r.delay];else if(Array.isArray(r.delay)&&r.delay.every(e.integer)&&r.delay.every(I=>e.inRange(I,0,65535)))y.delay=r.delay;else throw e.invalidParameterError("delay","integer or an array of integers between 0 and 65535",r.delay)}function m(r){if(e.object(r)){if(e.defined(r.quality))if(e.integer(r.quality)&&e.inRange(r.quality,1,100))this.options.tiffQuality=r.quality;else throw e.invalidParameterError("quality","integer between 1 and 100",r.quality);if(e.defined(r.bitdepth))if(e.integer(r.bitdepth)&&e.inArray(r.bitdepth,[1,2,4,8]))this.options.tiffBitdepth=r.bitdepth;else throw e.invalidParameterError("bitdepth","1, 2, 4 or 8",r.bitdepth);if(e.defined(r.tile)&&this._setBooleanOption("tiffTile",r.tile),e.defined(r.tileWidth))if(e.integer(r.tileWidth)&&r.tileWidth>0)this.options.tiffTileWidth=r.tileWidth;else throw e.invalidParameterError("tileWidth","integer greater than zero",r.tileWidth);if(e.defined(r.tileHeight))if(e.integer(r.tileHeight)&&r.tileHeight>0)this.options.tiffTileHeight=r.tileHeight;else throw e.invalidParameterError("tileHeight","integer greater than zero",r.tileHeight);if(e.defined(r.miniswhite)&&this._setBooleanOption("tiffMiniswhite",r.miniswhite),e.defined(r.pyramid)&&this._setBooleanOption("tiffPyramid",r.pyramid),e.defined(r.xres))if(e.number(r.xres)&&r.xres>0)this.options.tiffXres=r.xres;else throw e.invalidParameterError("xres","number greater than zero",r.xres);if(e.defined(r.yres))if(e.number(r.yres)&&r.yres>0)this.options.tiffYres=r.yres;else throw e.invalidParameterError("yres","number greater than zero",r.yres);if(e.defined(r.compression))if(e.string(r.compression)&&e.inArray(r.compression,["none","jpeg","deflate","packbits","ccittfax4","lzw","webp","zstd","jp2k"]))this.options.tiffCompression=r.compression;else throw e.invalidParameterError("compression","one of: none, jpeg, deflate, packbits, ccittfax4, lzw, webp, zstd, jp2k",r.compression);if(e.defined(r.predictor))if(e.string(r.predictor)&&e.inArray(r.predictor,["none","horizontal","float"]))this.options.tiffPredictor=r.predictor;else throw e.invalidParameterError("predictor","one of: none, horizontal, float",r.predictor);if(e.defined(r.resolutionUnit))if(e.string(r.resolutionUnit)&&e.inArray(r.resolutionUnit,["inch","cm"]))this.options.tiffResolutionUnit=r.resolutionUnit;else throw e.invalidParameterError("resolutionUnit","one of: inch, cm",r.resolutionUnit)}return this._updateFormatOut("tiff",r)}function x(r){return this.heif({...r,compression:"av1"})}function N(r){if(e.object(r)){if(e.string(r.compression)&&e.inArray(r.compression,["av1","hevc"]))this.options.heifCompression=r.compression;else throw e.invalidParameterError("compression","one of: av1, hevc",r.compression);if(e.defined(r.quality))if(e.integer(r.quality)&&e.inRange(r.quality,1,100))this.options.heifQuality=r.quality;else throw e.invalidParameterError("quality","integer between 1 and 100",r.quality);if(e.defined(r.lossless))if(e.bool(r.lossless))this.options.heifLossless=r.lossless;else throw e.invalidParameterError("lossless","boolean",r.lossless);if(e.defined(r.effort))if(e.integer(r.effort)&&e.inRange(r.effort,0,9))this.options.heifEffort=r.effort;else throw e.invalidParameterError("effort","integer between 0 and 9",r.effort);if(e.defined(r.chromaSubsampling))if(e.string(r.chromaSubsampling)&&e.inArray(r.chromaSubsampling,["4:2:0","4:4:4"]))this.options.heifChromaSubsampling=r.chromaSubsampling;else throw e.invalidParameterError("chromaSubsampling","one of: 4:2:0, 4:4:4",r.chromaSubsampling);if(e.defined(r.bitdepth))if(e.integer(r.bitdepth)&&e.inArray(r.bitdepth,[8,10,12])){if(r.bitdepth!==8&&this.constructor.versions.heif)throw e.invalidParameterError("bitdepth when using prebuilt binaries",8,r.bitdepth);this.options.heifBitdepth=r.bitdepth}else throw e.invalidParameterError("bitdepth","8, 10 or 12",r.bitdepth)}else throw e.invalidParameterError("options","Object",r);return this._updateFormatOut("heif",r)}function G(r){if(e.object(r)){if(e.defined(r.quality))if(e.integer(r.quality)&&e.inRange(r.quality,1,100))this.options.jxlDistance=r.quality>=30?.1+(100-r.quality)*.09:53/3e3*r.quality*r.quality-23/20*r.quality+25;else throw e.invalidParameterError("quality","integer between 1 and 100",r.quality);else if(e.defined(r.distance))if(e.number(r.distance)&&e.inRange(r.distance,0,15))this.options.jxlDistance=r.distance;else throw e.invalidParameterError("distance","number between 0.0 and 15.0",r.distance);if(e.defined(r.decodingTier))if(e.integer(r.decodingTier)&&e.inRange(r.decodingTier,0,4))this.options.jxlDecodingTier=r.decodingTier;else throw e.invalidParameterError("decodingTier","integer between 0 and 4",r.decodingTier);if(e.defined(r.lossless))if(e.bool(r.lossless))this.options.jxlLossless=r.lossless;else throw e.invalidParameterError("lossless","boolean",r.lossless);if(e.defined(r.effort))if(e.integer(r.effort)&&e.inRange(r.effort,3,9))this.options.jxlEffort=r.effort;else throw e.invalidParameterError("effort","integer between 3 and 9",r.effort)}return this._updateFormatOut("jxl",r)}function M(r){if(e.object(r)&&e.defined(r.depth))if(e.string(r.depth)&&e.inArray(r.depth,["char","uchar","short","ushort","int","uint","float","complex","double","dpcomplex"]))this.options.rawDepth=r.depth;else throw e.invalidParameterError("depth","one of: char, uchar, short, ushort, int, uint, float, complex, double, dpcomplex",r.depth);return this._updateFormatOut("raw")}function B(r){if(e.object(r)){if(e.defined(r.size))if(e.integer(r.size)&&e.inRange(r.size,1,8192))this.options.tileSize=r.size;else throw e.invalidParameterError("size","integer between 1 and 8192",r.size);if(e.defined(r.overlap))if(e.integer(r.overlap)&&e.inRange(r.overlap,0,8192)){if(r.overlap>this.options.tileSize)throw e.invalidParameterError("overlap",`<= size (${this.options.tileSize})`,r.overlap);this.options.tileOverlap=r.overlap}else throw e.invalidParameterError("overlap","integer between 0 and 8192",r.overlap);if(e.defined(r.container))if(e.string(r.container)&&e.inArray(r.container,["fs","zip"]))this.options.tileContainer=r.container;else throw e.invalidParameterError("container","one of: fs, zip",r.container);if(e.defined(r.layout))if(e.string(r.layout)&&e.inArray(r.layout,["dz","google","iiif","iiif3","zoomify"]))this.options.tileLayout=r.layout;else throw e.invalidParameterError("layout","one of: dz, google, iiif, iiif3, zoomify",r.layout);if(e.defined(r.angle))if(e.integer(r.angle)&&!(r.angle%90))this.options.tileAngle=r.angle;else throw e.invalidParameterError("angle","positive/negative multiple of 90",r.angle);if(this._setBackgroundColourOption("tileBackground",r.background),e.defined(r.depth))if(e.string(r.depth)&&e.inArray(r.depth,["onepixel","onetile","one"]))this.options.tileDepth=r.depth;else throw e.invalidParameterError("depth","one of: onepixel, onetile, one",r.depth);if(e.defined(r.skipBlanks))if(e.integer(r.skipBlanks)&&e.inRange(r.skipBlanks,-1,65535))this.options.tileSkipBlanks=r.skipBlanks;else throw e.invalidParameterError("skipBlanks","integer between -1 and 255/65535",r.skipBlanks);else e.defined(r.layout)&&r.layout==="google"&&(this.options.tileSkipBlanks=5);const y=e.bool(r.center)?r.center:r.centre;if(e.defined(y)&&this._setBooleanOption("tileCentre",y),e.defined(r.id))if(e.string(r.id))this.options.tileId=r.id;else throw e.invalidParameterError("id","string",r.id);if(e.defined(r.basename))if(e.string(r.basename))this.options.tileBasename=r.basename;else throw e.invalidParameterError("basename","string",r.basename)}if(e.inArray(this.options.formatOut,["jpeg","png","webp"]))this.options.tileFormat=this.options.formatOut;else if(this.options.formatOut!=="input")throw e.invalidParameterError("format","one of: jpeg, png, webp",this.options.formatOut);return this._updateFormatOut("dz")}function T(r){if(!e.plainObject(r))throw e.invalidParameterError("options","object",r);if(e.integer(r.seconds)&&e.inRange(r.seconds,0,3600))this.options.timeoutSeconds=r.seconds;else throw e.invalidParameterError("seconds","integer between 0 and 3600",r.seconds);return this}function A(r,y){return e.object(y)&&y.force===!1||(this.options.formatOut=r),this}function P(r,y){if(e.bool(y))this.options[r]=y;else throw e.invalidParameterError(r,"boolean",y)}function v(){if(!this.options.streamOut){this.options.streamOut=!0;const r=Error();this._pipeline(void 0,r)}}function R(r,y){return typeof r=="function"?(this._isStreamInput()?this.on("finish",()=>{this._flattenBufferIn(),g.pipeline(this.options,(I,L,$)=>{I?r(e.nativeError(I,y)):r(null,L,$)})}):g.pipeline(this.options,(I,L,$)=>{I?r(e.nativeError(I,y)):r(null,L,$)}),this):this.options.streamOut?(this._isStreamInput()?(this.once("finish",()=>{this._flattenBufferIn(),g.pipeline(this.options,(I,L,$)=>{I?this.emit("error",e.nativeError(I,y)):(this.emit("info",$),this.push(L)),this.push(null),this.on("end",()=>this.emit("close"))})}),this.streamInFinished&&this.emit("finish")):g.pipeline(this.options,(I,L,$)=>{I?this.emit("error",e.nativeError(I,y)):(this.emit("info",$),this.push(L)),this.push(null),this.on("end",()=>this.emit("close"))}),this):this._isStreamInput()?new Promise((I,L)=>{this.once("finish",()=>{this._flattenBufferIn(),g.pipeline(this.options,($,S,q)=>{$?L(e.nativeError($,y)):this.options.resolveWithObject?I({data:S,info:q}):I(S)})})}):new Promise((I,L)=>{g.pipeline(this.options,($,S,q)=>{$?L(e.nativeError($,y)):this.options.resolveWithObject?I({data:S,info:q}):I(S)})})}return Te=function(r){Object.assign(r.prototype,{toFile:l,toBuffer:i,keepExif:n,withExif:f,withExifMerge:u,keepIccProfile:t,withIccProfile:d,keepMetadata:s,withMetadata:b,toFormat:p,jpeg:E,jp2:_,png:k,webp:j,tiff:m,avif:x,heif:N,jxl:G,gif:O,raw:M,tile:B,timeout:T,_updateFormatOut:A,_setBooleanOption:P,_read:v,_pipeline:R})},Te}var Me,Cr;function Gt(){if(Cr)return Me;Cr=1;const h=D,e=De(),g=z(),{runtimePlatformArch:w}=Tr(),a=K(),c=w(),o=a.libvipsVersion(),l=a.format();l.heif.output.alias=["avif","heic"],l.jpeg.output.alias=["jpe","jpg"],l.tiff.output.alias=["tif"],l.jp2k.output.alias=["j2c","j2k","jp2","jpx"];const i={nearest:"nearest",bilinear:"bilinear",bicubic:"bicubic",locallyBoundedBicubic:"lbb",nohalo:"nohalo",vertexSplitQuadraticBasisSpline:"vsqbs"};let n={vips:o.semver};if(!o.isGlobal)if(o.isWasm)try{n=require("@img/sharp-wasm32/versions")}catch{}else try{n=U(`@img/sharp-${c}/versions`)}catch{try{n=U(`@img/sharp-libvips-${c}/versions`)}catch{}}n.sharp=_r.version,n.heif&&l.heif&&(l.heif.input.fileSuffix=[".avif"],l.heif.output.alias=["avif"]);function f(E){return g.bool(E)?E?a.cache(50,20,100):a.cache(0,0,0):g.object(E)?a.cache(E.memory,E.files,E.items):a.cache()}f(!0);function u(E){return a.concurrency(g.integer(E)?E:null)}e.familySync()===e.GLIBC&&!a._isUsingJemalloc()?a.concurrency(1):e.familySync()===e.MUSL&&a.concurrency()===1024&&a.concurrency(D.availableParallelism());const t=new h.EventEmitter;function d(){return a.counters()}function s(E){return a.simd(g.bool(E)?E:null)}function b(E){if(g.object(E))if(Array.isArray(E.operation)&&E.operation.every(g.string))a.block(E.operation,!0);else throw g.invalidParameterError("operation","Array<string>",E.operation);else throw g.invalidParameterError("options","object",E)}function p(E){if(g.object(E))if(Array.isArray(E.operation)&&E.operation.every(g.string))a.block(E.operation,!1);else throw g.invalidParameterError("operation","Array<string>",E.operation);else throw g.invalidParameterError("options","object",E)}return Me=function(E){E.cache=f,E.concurrency=u,E.counters=d,E.simd=s,E.format=l,E.interpolators=i,E.versions=n,E.queue=t,E.block=b,E.unblock=p},Me}var Be,qr;function Ut(){if(qr)return Be;qr=1;const h=St();return Ft()(h),_t()(h),Tt()(h),Mt()(h),Bt()(h),Dt()(h),zt()(h),Gt()(h),Be=h,Be}var Wt=Ut();const Ht=Dr(Wt),Xt=Object.freeze(Object.defineProperty({__proto__:null,default:Ht},Symbol.toStringTag,{value:"Module"}));export{Xt as i};
